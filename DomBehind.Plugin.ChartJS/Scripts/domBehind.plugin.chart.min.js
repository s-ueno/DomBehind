var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),DomBehind;(function(n){var i,u,t,r;(function(n){n[n.Bar=0]="Bar";n[n.Line=1]="Line";n[n.Radar=2]="Radar";n[n.Pie=3]="Pie";n[n.PolarArea=4]="PolarArea";n[n.Bubble=5]="Bubble";n[n.Scatter=6]="Scatter"})(i=n.ChartType||(n.ChartType={}));u=function(){function n(){this.Index=0;this.Colors=["#f39700","#e60012","#00a7db","#009944","#d7c447","#9b7cb6","#00ada9","#bb641d","#e85298","#0079c2","#6cbb5a","#b6007a","#e5171f","#522886","#0078ba","#019a66","#e44d93","#814721","#a9cc51","#ee7b1a","#00a0de",]}return n.prototype.Pop=function(n){var f=this.Colors[this.Index],t,r,u;return this.Colors.length<++this.Index&&(this.Index=0),t=this.ParseColor(f),r=n===i.Bar?"rgba("+t[0]+", "+t[1]+", "+t[2]+", 0.5)":"rgb("+t[0]+", "+t[1]+", "+t[2]+")",u="rgb("+t[0]+", "+t[1]+", "+t[2]+")",{background:r,border:u}},n.prototype.ParseColor=function(n){var t=n.match(/^#([0-9a-f]{3})$/i),i;return t?(i=t[1],[parseInt(i.charAt(0),16)*17,parseInt(i.charAt(1),16)*17,parseInt(i.charAt(2),16)*17]):(t=n.match(/^#([0-9a-f]{6})$/i),t)?(i=t[1],[parseInt(i.substr(0,2),16),parseInt(i.substr(2,2),16),parseInt(i.substr(4,2),16)]):(t=n.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),t)?[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]:[255,0,0]},n}();t=function(t){function r(){return t!==null&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.Ensure=function(){var n=this.Element.attr("id");n||(n="id-"+NewUid(),this.Element.attr("id",n));window[n]=this;this.Colors=new u;t.prototype.Ensure.call(this);this.Instance&&this.Instance.SetValue(this)},r.prototype.UpdateTarget=function(){t.prototype.UpdateTarget.call(this);this.Chart&&this.Chart.update()},Object.defineProperty(r.prototype,"ItemsSource",{get:function(){return this._items},set:function(n){this._items&&(this._items.CurrentChanged.Clear(),this._items.CurrentChanging.Clear(),this._items.PropertyChanged.Clear(),this._items.Added.Clear(),this._items.Removed.Clear());this._items=n;this.ReBuildChart()},enumerable:!0,configurable:!0}),r.prototype.ReBuildChart=function(){var n={},t;n.type=this.ParseType();n.data={datasets:this.DataSets(),labels:this.Labels()};n.options=$.extend(!0,this.DefaultOption,this.Option);this.ChartTitle&&(n.options.title={display:!0,text:this.ChartTitle});n.options.scales=this.ParseScales();Object.IsNullOrUndefined(this.Responsive)||(n.options.responsive=this.Responsive);n.options.tooltips=Object.IsNullOrUndefined(this.Tooltips)?{mode:"index"}:this.Tooltips;n.options.hover=Object.IsNullOrUndefined(this.Hover)?{mode:"nearest"}:this.Hover;this.Element.empty();t=this.Element[0];this.Chart=new Chart(t.getContext("2d"),n)},r.prototype.ParseType=function(){return this.Type===i.Bar?"bar":this.Type===i.Line?"line":this.Type===i.Radar?"radar":this.Type===i.Pie?"pie":this.Type===i.PolarArea?"polarArea":this.Type===i.Bubble?"bubble":this.Type===i.Scatter?"scatter":void 0},r.prototype.Labels=function(){var i=[],n,t,r;if(this.Expression.label&&(n=this.ItemsSource.ToArray(),n.length!==0))for(t=0;t<n.length;t++)r=n[t],i.push(this.Expression.label(r));return i},r.prototype.DataSets=function(){var i,r,t,e,o,s,h;if(!this.ItemsSource||(i=this.ItemsSource.ToArray(),i.length===0))return null;var c=[],n={},l=[],u=[],f=[];for(r=0;r<i.length;r++){if(t=i[r],Object.IsNullOrUndefined(t))return;this.Expression.data&&l.push(this.Expression.data(t));e=this.Colors.Pop(this.Type);this.Expression.backgroundColor?(o=this.Expression.backgroundColor(t),o&&u.push(o)):u.push(e.background);this.Expression.borderColor?(s=this.Expression.backgroundColor(t),s&&f.push(s)):f.push(e.border);this.Expression.fill?(h=this.Expression.fill(t),h&&(n.fill=h)):n.fill=!1}return n.data=l,n.backgroundColor=u,n.borderColor=f,c.push(n),c},r.prototype.ParseScales=function(){var n={};return this.ChartXCaption&&(n.xAxes=[{display:!0,scaleLabel:{display:!0,labelString:this.ChartXCaption}}]),this.ChartYCaption&&(n.yAxes=[{display:!0,scaleLabel:{display:!0,labelString:this.ChartYCaption}}]),n},Object.defineProperty(r.prototype,"DefaultOption",{get:function(){return{responsive:!0,legend:{position:"top"}}},enumerable:!0,configurable:!0}),r.ItemsSourceProperty=n.Data.DependencyProperty.RegisterAttached("itemssource",function(){},function(n,t){var r=n.attr("id"),i;r&&(i=window[r],i)&&(i.ItemsSource=t)},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay),r}(n.Data.DataBindingBehavior);n.ChartBehavior=t;r=function(i){function r(){return i!==null&&i.apply(this,arguments)||this}return __extends(r,i),r.prototype.SetCaption=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.ChartTitle=n),i},r.prototype.SetCaptionPosition=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.Position=n),i},r.prototype.SetCaptionX=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.ChartXCaption=n),i},r.prototype.SetCaptionY=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.ChartYCaption=n),i},r.prototype.SetResponsive=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.Responsive=n),i},r.prototype.SetTootips=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.Tooltips=n?n:{mode:"index"}),i},r.prototype.SetHover=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.Hover=n?n:{mode:"nearest"}),i},r.prototype.BindingBackgroundColor=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.Expression.backgroundColor=n),i},r.prototype.BindingBorderColor=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.Expression.borderColor=n),i},r.prototype.BindingBorderWidth=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.Expression.borderWidth=n),i},r.prototype.BindingFill=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.Expression.fill=n),i},r.prototype.BindingLabel=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.Expression.label=n),i},r.prototype.BindingValue=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.Expression.data=n),i},r.prototype.BindingInstance=function(i){var r=this;return r.CurrentBehavior instanceof t&&(r.CurrentBehavior.Instance=new n.LamdaExpression(r.Owner.DataContext,i)),r},r}(n.BindingBehaviorBuilder);n.ChartBindingBehaviorBuilder=r;n.BindingBehaviorBuilder.prototype.BuildChart=function(i,u,f){var e=this,o=e.Add(new t),s;return o.Property=t.ItemsSourceProperty,o.PInfo=new n.LamdaExpression(e.Owner.DataContext,i),o.Expression={},o.Type=u,o.Option=f,s=new r(e.Owner),s.CurrentBehavior=e.CurrentBehavior,s.CurrentElement=e.CurrentElement,s};n.BindingBehaviorBuilder.prototype.BuildChartOfLine=function(u,f){var e=this,o=e.Add(new t),s;return o.Property=t.ItemsSourceProperty,o.PInfo=new n.LamdaExpression(e.Owner.DataContext,u),o.Expression={},o.Type=i.Line,o.Option=f,s=new r(e.Owner),s.CurrentBehavior=e.CurrentBehavior,s.CurrentElement=e.CurrentElement,s}})(DomBehind||(DomBehind={}));
//# sourceMappingURL=domBehind.plugin.chart.min.js.map