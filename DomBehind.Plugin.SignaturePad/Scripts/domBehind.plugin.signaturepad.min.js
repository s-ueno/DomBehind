var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),DomBehind;(function(n){var t,i,r;(function(n){n[n.Png=0]="Png";n[n.Jpeg=1]="Jpeg";n[n.Svg=2]="Svg"})(t=n.SignSaveImage||(n.SignSaveImage={}));i=function(i){function r(){return i!==null&&i.apply(this,arguments)||this}return __extends(r,i),r.prototype.SetOption=function(n){this.Option=$.extend(!0,this.DefaultOption,n)},Object.defineProperty(r.prototype,"DefaultOption",{get:function(){return{image:t.Png,color:"rgb(255,255,255)"}},enumerable:!1,configurable:!0}),r.prototype.Ensure=function(){var t=this,n;this.Identity=this.Element.attr("id");this.Identity||(this.Identity="id-"+NewUid(),this.Element.attr("id",this.Identity));window[this.Identity]=this;n=$('<canvas class="SignCanvas" style="width:100%;height:100%"><\/canvas>');this.Element.append(n);this.Canvas=n[0];this.SignaturePad=new SignaturePad(this.Canvas);this.Resize();n.ready(function(){t.Refresh()})},r.prototype.CreateImageToBlob=function(){return this.CreateImage(!0)},r.prototype.CreateImageToArray=function(){return this.CreateImage(!1)},r.prototype.CreateImage=function(n){var i,u,r,f;return this.SignaturePad.isEmpty()?null:(i=null,this.Option.image===t.Jpeg?i="image/jpeg":this.Option.image===t.Svg&&(i="image/svg+xml"),u=this.SignaturePad,r=u.toDataURL(i),n)?this.ToBlob(r):(f=this.ToArray(r),[].slice.call(f))},r.prototype.Download=function(n){var i;if(!this.SignaturePad.isEmpty()){i=null;this.Option.image===t.Jpeg?i="image/jpeg":this.Option.image===t.Svg&&(i="image/svg+xml");var r=this.SignaturePad,u=r.toDataURL(i),f=this.ToBlob(u);this.DownloadRaw(n,f)}},r.prototype.ToBlob=function(n){for(var i=n.split(";base64,"),e=i[0].split(":")[1],r=window.atob(i[1]),u=r.length,f=new Uint8Array(u),t=0;t<u;++t)f[t]=r.charCodeAt(t);return new Blob([f],{type:e})},r.prototype.ToArray=function(n){for(var i=n.split(";base64,"),e=i[0].split(":")[1],r=window.atob(i[1]),u=r.length,f=new Uint8Array(u),t=0;t<u;++t)f[t]=r.charCodeAt(t);return f},r.prototype.DownloadRaw=function(n,t){var r=window.URL.createObjectURL(t),i;navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1?window.open(r):(i=document.createElement("a"),i.style.display="none",i.href=r,i.download=n,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(r),i.remove())},r.prototype.Refresh=function(){if(this.DataContext&&!this.DataContext._disposed){var n=Math.max(window.devicePixelRatio||1,1);this.Canvas.width=this.Canvas.offsetWidth*n;this.Canvas.height=this.Canvas.offsetHeight*n;this.Canvas.getContext("2d").scale(n,n);this.SignaturePad.clear()}},r.prototype.Resize=function(){var t=this,n;$(window).on("resize",function(){n!==!1&&clearTimeout(n);n=setTimeout(function(){t.Refresh()},200)})},r.InstanceProperty=n.Data.DependencyProperty.RegisterAttached("Instance",function(n){var t;if(!Object.IsNullOrUndefined(n))return(t=n.attr("id"),!t)?null:window[t]},function(){},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.TwoWay),r}(n.Data.RelativeDataBindingBehavior);n.Sign=i;r=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.Binding=function(t,i,r,u){var f=this;if(f.CurrentBehavior instanceof n.Data.RelativeDataBindingBehavior){var s=f.CurrentBehavior,o=f.CurrentElement,e=f.CurrentBehavior.AddBinding(new n.Data.DataBindingBehavior,f.CurrentSelector);e.Element=f.CurrentSelector?f.Owner.Container.find(f.CurrentSelector):o;e.DataContext=f.CurrentBehavior.DataContext;e.Property=t;e.PInfo=new n.LamdaExpression(this.Owner.DataContext,i);e.BindingPolicy.Trigger=Object.IsNullOrUndefined(u)?t.UpdateSourceTrigger:u;e.BindingPolicy.Mode=Object.IsNullOrUndefined(r)?t.BindingMode:r;f.CurrentBehavior=s;f.CurrentElement=o}else f.Binding(t,i,r,u);return f},i}(n.Data.DataBindingBehaviorBuilder);n.SignBindingBuilder=r;n.BindingBehaviorBuilder.prototype.BuildSign=function(t){var u=this,f,e;return u.CurrentBehavior instanceof n.Data.RelativeDataBindingBehavior?(f=u.CurrentBehavior.AddBinding(new i,u.CurrentSelector),f.DataContext=u.CurrentBehavior.DataContext,f.Element=u.CurrentElement,f.SetOption(t)):(f=u.Add(new i),f.DataContext=u.CurrentBehavior.DataContext,f.Element=u.CurrentSelector?u.Owner.Container.find(u.CurrentSelector):u.CurrentElement,f.SetOption(t)),e=new r(u.Owner),e.CurrentBehavior=u.CurrentBehavior,e.CurrentElement=u.CurrentElement,e.CurrentSelector=u.CurrentSelector,e}})(DomBehind||(DomBehind={}));
//# sourceMappingURL=domBehind.plugin.signaturepad.min.js.map