var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),DomBehind;(function(n){var t,i;(function(n){n[n.Png=0]="Png";n[n.Jpeg=1]="Jpeg";n[n.Svg=2]="Svg"})(t=n.SignSaveImage||(n.SignSaveImage={}));i=function(i){function r(){return i!==null&&i.apply(this,arguments)||this}return __extends(r,i),r.prototype.SetOption=function(n){this.Option=$.extend(!0,this.DefaultOption,n)},Object.defineProperty(r.prototype,"DefaultOption",{get:function(){return{image:t.Png,color:"rgb(255,255,255)"}},enumerable:!0,configurable:!0}),r.prototype.Ensure=function(){this.Identity=this.Element.attr("id");this.Identity||(this.Identity="id-"+NewUid(),this.Element.attr("id",this.Identity));window[this.Identity]=this;var n=$('<canvas class="SignCanvas" style="width:100%;height:100%"><\/canvas>');this.Element.append(n);this.Canvas=n[0];this.SignaturePad=new SignaturePad(this.Canvas);this.Refresh();this.Resize()},r.prototype.CreateImageToBlob=function(){return this.CreateImage(!0)},r.prototype.CreateImageToArray=function(){return this.CreateImage(!1)},r.prototype.CreateImage=function(n){var i,u,r,f;return this.SignaturePad.isEmpty()?null:(i=null,this.Option.image===t.Jpeg?i="image/jpeg":this.Option.image===t.Svg&&(i="image/svg+xml"),u=this.SignaturePad,r=u.toDataURL(i),n)?this.ToBlob(r):(f=this.ToArray(r),[].slice.call(f))},r.prototype.Download=function(n){var i;if(!this.SignaturePad.isEmpty()){i=null;this.Option.image===t.Jpeg?i="image/jpeg":this.Option.image===t.Svg&&(i="image/svg+xml");var r=this.SignaturePad,u=r.toDataURL(i),f=this.ToBlob(u);this.DownloadRaw(n,f)}},r.prototype.ToBlob=function(n){for(var i=n.split(";base64,"),e=i[0].split(":")[1],r=window.atob(i[1]),u=r.length,f=new Uint8Array(u),t=0;t<u;++t)f[t]=r.charCodeAt(t);return new Blob([f],{type:e})},r.prototype.ToArray=function(n){for(var i=n.split(";base64,"),e=i[0].split(":")[1],r=window.atob(i[1]),u=r.length,f=new Uint8Array(u),t=0;t<u;++t)f[t]=r.charCodeAt(t);return f},r.prototype.DownloadRaw=function(n,t){var r=window.URL.createObjectURL(t),i;navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")===-1?window.open(r):(i=document.createElement("a"),i.style.display="none",i.href=r,i.download=n,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(r),i.remove())},r.prototype.Refresh=function(){if(this.DataContext&&!this.DataContext._disposed){var n=Math.max(window.devicePixelRatio||1,1);this.Canvas.width=this.Canvas.offsetWidth*n;this.Canvas.height=this.Canvas.offsetHeight*n;this.Canvas.getContext("2d").scale(n,n);this.SignaturePad.clear()}},r.prototype.Resize=function(){var t=this,n;$(window).on("resize",function(){n!==!1&&clearTimeout(n);n=setTimeout(function(){t.Refresh()},200)})},r.InstanceProperty=n.Data.DependencyProperty.RegisterAttached("Instance",function(n){var t=n.attr("id");return t?window[t]:null},function(){},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.TwoWay),r}(n.Data.RelativeDataBindingBehavior);n.Sign=i;n.BindingBehaviorBuilder.prototype.BuildSign=function(n){var t=this,r=t.Add(new i);return r.SetOption(n),t}})(DomBehind||(DomBehind={}));
//# sourceMappingURL=domBehind.plugin.signaturepad.min.js.map