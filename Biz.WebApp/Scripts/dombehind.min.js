function NewUid(){for(var t="",i,n=0;n<32;n++)i=Math.random()*16|0,(n==8||n==12||n==16||n==20)&&(t+="-"),t+=(n==12?4:n==16?i&3|8:i).toString(16);return t}function ExtendIIdentity(){return{__uuid:NewUid()}}function using(n,t){try{t(n)}finally{n.Dispose()}}var StringSplitOptions,z_indexKey,w_dynamicPrefix,__extends,annotationCollection,__lazyCollection,DomBehind;(function(){function r(){var t=this.querySelectorAll("template"),u=[],i,n=0;if(e){for(i=this.cloneNode(!0),t=i.content.querySelectorAll("template");t[n];n++)t[n].clone=r;return i}for(;t[n];n++)u.push(t[n].content);for(i=this.cloneNode(!0),i.content=this.content,i.clone=r,t=i.querySelectorAll("template"),n=0;t[n];n++)t[n].content=u[n],t[n].clone=r;return i}var e="content"in document.createElement("template"),t,n,o,u,s,i,f;if(!e)for(t=Array.prototype.slice.call(document.getElementsByTagName("template")),i=0;n=t[i++];){for(o=n.children,u=document.createDocumentFragment(),f=0;s=o[f];f++)u.appendChild(s);n.content=u}for(t=document.querySelectorAll("template"),i=0;n=t[i++];)n.clone=r})(),function(n){var t=function(){function n(){}return n}();n.EventArgs=t}(DomBehind||(DomBehind={})),function(n){var t=function(){function n(n){n===void 0&&(n=!1);this.Cancel=n}return n}();n.CancelEventArgs=t}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(n.EventArgs);n.CollectionChangedEventArgs=t}(DomBehind||(DomBehind={})),function(n){var t=function(){function n(n){this.Message=n}return n.prototype.ToString=function(){return this.Message},n}();n.Exception=t}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(n){function t(t,i,r){var u=n.call(this,i)||this;return u.JqXHR=t,u.TextStatus=i,u.ErrorThrown=r,u}return __extends(t,n),Object.defineProperty(t.prototype,"ErrorStatus",{get:function(){return this.JqXHR?this.JqXHR.status:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ErrorTitle",{get:function(){if(this.JqXHR){var n=this.JqXHR.responseJSON;return n&&n.Message?n.Message:$(this.JqXHR.responseText).filter("title").text()}return this.TextStatus+":"+this.ErrorThrown},enumerable:!0,configurable:!0}),t.prototype.ToString=function(){return"status:"+this.ErrorStatus+"\n"+this.ErrorTitle},t}(n.Exception);n.AjaxException=t}(DomBehind||(DomBehind={})),function(n){var t;(function(n){var i=function(){function n(n,t){this.Message=n;this.Selector=t}return n}(),t;n.ValidationException=i;t=function(){function n(n){this.Items=n}return n}();n.AggregateValidationException=t})(t=n.Validation||(n.Validation={}))}(DomBehind||(DomBehind={})),function(n){var t=function(){function n(){this.handlers=[];this._disposed=!1}return Object.defineProperty(n.prototype,"EventName",{get:function(){return this._eventName},set:function(n){this._eventName=n},enumerable:!0,configurable:!0}),n.prototype.AddHandler=function(n){this.handlers.push(n)},n.prototype.RemoveHandler=function(n){this.handlers=this.handlers.filter(function(t){return t!==n})},n.prototype.Raise=function(n,t){this.handlers.slice(0).forEach(function(i){return i(n,t)})},n.prototype.Clear=function(){var n=this;$.each(this.handlers,function(t){n.handlers[t]=null});this.handlers=[]},n.prototype.Ensure=function(n){this.EnsureHandler&&this.EnsureHandler(n)},n.prototype.Dispose=function(){this._disposed||this.handlers&&(this.handlers.length=0);this._disposed=!0},n}(),i;n.TypedEvent=t;i=function(){function n(n){this._eventName=n}return n.prototype.Create=function(){var n=new t;return n.EventName=this.EventName,n.EnsureHandler=this.ensureHandler,n},Object.defineProperty(n.prototype,"EventName",{get:function(){return this._eventName},enumerable:!0,configurable:!0}),n.RegisterAttached=function(t,i){var r=new n(t);return r.ensureHandler=i,r},n}();n.EventBuilder=i}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(n){function t(t){var i=n.call(this)||this;return i.Name=t,i}return __extends(t,n),t}(n.EventArgs);n.PropertyChangedEventArgs=t}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(n){function t(t,i,r){var u=n.call(this)||this;return u.Name=t,u.OldValue=i,u.NewValue=r,u}return __extends(t,n),t}(n.EventArgs);n.PropertyChangingEventArgs=t}(DomBehind||(DomBehind={})),function(n){var t=function(){function t(){this.PropertyChanged=new n.TypedEvent;this._dic={};this._disposed=!1}return t.prototype.GetProperty=function(n,t){var i=this._dic[n];return Object.IsNullOrUndefined(i)?t:i},t.prototype.SetProperty=function(n,t){var i=!1,r=this.GetProperty(n);return t!==r&&(i=!0,this._dic[n]=t,this._dic[n+"_old___"]=r,this.OnPropertyChanged(n)),i},t.prototype.Dispose=function(){this._disposed||(this._dic=null,this.PropertyChanged&&this.PropertyChanged.Dispose());this._disposed=!0},t.prototype.OnPropertyChanged=function(t){this.PropertyChanged.Raise(this,new n.PropertyChangedEventArgs(t))},t}();n.NotifiableImp=t}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(){function n(n,t){this.DataContext=n;this.MemberPath=t}return n.prototype.SetValue=function(n){var i=this.MemberPath.split("."),t=this.DataContext,r;if($.each(i.slice(0,i.length-1),function(n,i){if(Object.IsNullOrUndefined(t))return!1;t=t[i]}),Object.IsNullOrUndefined(t))return null;r=i[i.length-1];t[r]=n},n.prototype.GetValue=function(){var t=this.MemberPath.split("."),n=this.DataContext,i;return($.each(t.slice(0,t.length-1),function(t,i){if(Object.IsNullOrUndefined(n))return!1;n=n[i]}),Object.IsNullOrUndefined(n))?null:(i=t[t.length-1],n[i])},n.prototype.Dispose=function(){this.DataContext=null;this.MemberPath=null},n}(),i,r;n.PropertyInfo=t;i=function(n){function t(i,r){var u=n.call(this,i,t.ParsePropertyPath(r))||this;return u.Lamda=r,u}return __extends(t,n),t.ParsePropertyPath=function(n){var i=t.NameOf(n);return i.split(".").slice(1).join(".")},t.NameOf=function(n){var r=t._extractor_Minified.exec(n+""),i=r[1].trim();return(i.charAt(i.length-1)==="}"||i.charAt(i.length-1)===";")&&(r=t._extractor.exec(n+""),i=r[1]),i},t.prototype.Dispose=function(){this.Lamda=null;n.prototype.Dispose.call(this)},t.Path=function(n){return t.ParsePropertyPath(n)},t.GetValueCore=function(n,i){var r=new t(n,i);return r.GetValue()},t._extractor=new RegExp("return (.*);"),t._extractor_Minified=new RegExp("return (.*)}"),t}(t);n.LamdaExpression=i;r=function(n){function t(t){var i=n.call(this,null,".")||this;return i.Value=t,i}return __extends(t,n),t.prototype.SetValue=function(){},t.prototype.GetValue=function(){return this.Value},t}(t);n.BooleanFakeExpression=r}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(t){function i(r,u){var f=t.call(this)||this;return f.DisplayMemberPath=u,f.CurrentChanging=new n.TypedEvent,f.CurrentChanged=new n.TypedEvent,f.Added=new n.TypedEvent,f.Removed=new n.TypedEvent,f.engaged=!1,f.Source=new collections.LinkedList,f.List=new collections.LinkedList,$.each(r,function(n,t){f.Source.add(t);f.List.add(t)}),f.ViewReflected=i.ViewReflectedStatus.None,f}return __extends(i,t),Object.defineProperty(i.prototype,"Current",{get:function(){return this._current},set:function(n){this.OnCurrentChanging().Cancel||(this._current=n,this.ViewReflected=i.ViewReflectedStatus.NoReflected,this.engaged)||(this.OnCurrentChanged(),this.OnPropertyChanged("Current"))},enumerable:!0,configurable:!0}),i.prototype.OnCurrentChanging=function(){var t=new n.CancelEventArgs;return this.CurrentChanging.Raise(this,t),t},i.prototype.OnCurrentChanged=function(){this.engaged||this.CurrentChanged.Raise(this,new n.EventArgs)},i.prototype.Find=function(n){return this.List.toArray().FirstOrDefault(n)},i.prototype.Contains=function(n){var i=this,t;return n instanceof Array?(t=!0,$.each(n,function(n,r){if(!i.List.contains(r))return t=!1,!1}),t):this.List.contains(n)},i.prototype.Select=function(n){return this.Current=n,this},i.prototype.UnSelect=function(){return this.Current=null,this},i.prototype.MoveFirst=function(){return this.Current=this.List.first(),this},i.prototype.MoveLast=function(){return this.Current=this.List.last(),this},i.prototype.MoveToPosition=function(n){return this.Current=this.List.elementAtIndex(n),this},i.prototype.Refresh=function(){return this.RefreshRaw(),this.OnPropertyChanged(),this},i.prototype.RefreshRaw=function(){var n=this;this.List=new collections.LinkedList;$.each(this.Source.toArray(),function(t,i){n.Filter?n.Filter(i)&&n.List.add(i):n.List.add(i)});this.Current&&(this.Contains(this.Current)||this.MoveFirst())},i.prototype.OnPropertyChanged=function(t){this.engaged||this.PropertyChanged.Raise(this,new n.PropertyChangedEventArgs(t))},i.prototype.Begin=function(){return this.engaged=!0,this},i.prototype.End=function(){return this.engaged=!1,this},i.prototype.Add=function(t){this.Source.add(t);this.RefreshRaw();this.ViewReflected=i.ViewReflectedStatus.NoReflected;var r=new n.CollectionChangedEventArgs;r.Item=t;this.Added.Raise(this,r);this.OnPropertyChanged("Source - Add")},i.prototype.Remove=function(t){this.Source.remove(t);this.RefreshRaw();this.ViewReflected=i.ViewReflectedStatus.NoReflected;var r=new n.CollectionChangedEventArgs;r.Item=t;this.Removed.Raise(this,r);this.OnPropertyChanged("Source - Remove")},i.prototype.ToArray=function(){var n=this;return this.Filter?this.List.toArray().Where(function(t){return n.Filter(t)}):this.List.toArray()},i}(n.NotifiableImp);t.ListCollectionView=i})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(n){var t;(function(n){var t;(function(n){n[n.None=0]="None";n[n.NoReflected=1]="NoReflected";n[n.Reflected=2]="Reflected"})(t=n.ViewReflectedStatus||(n.ViewReflectedStatus={}))})(t=n.ListCollectionView||(n.ListCollectionView={}))})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(n){var t;(function(n){n[n.Explicit=0]="Explicit";n[n.LostForcus=1]="LostForcus";n[n.PropertyChanged=2]="PropertyChanged"})(t=n.UpdateSourceTrigger||(n.UpdateSourceTrigger={}))})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(n){var t;(function(n){n[n.TwoWay=0]="TwoWay";n[n.OneWay=1]="OneWay";n[n.OneWayToSource=2]="OneWayToSource"})(t=n.BindingMode||(n.BindingMode={}))})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t}(collections.LinkedList);n.List=t}(DomBehind||(DomBehind={})),function(n){var t=function(){function t(t,i){var u;if(this.source=t,this.PropertyChanging=new n.TypedEvent,this.PropertyChanged=new n.TypedEvent,t!=null){var f=Object.keys(t),e=function(){var n=f[u];if(String.IsNullOrWhiteSpace(n))return"continue";i?(r.Wrapper=i.wrapper,i.marks?i.marks.Any(function(t){return t===n})&&r.Recurcive(t,n,null):r.Recurcive(t,n,null)):r.Recurcive(t,n,null)},r=this;for(u=0;u<f.length;u++)e()}}return t.Register=function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];return new t(n,{marks:r})},t.RegisterAttached=function(n,i){return new t(n,i)},t.prototype.Recurcive=function(n,t,i){var r=n[t],e=i?i+"."+t:t,f,u;if((Object.defineProperty(n,t,this.CreateDescriptor(e,r)),!Object.IsNullOrUndefined(r))&&typeof r=="object")for(f=Object.keys(r),u=0;u<f.length;u++)this.Recurcive(r,f[u],e)},Object.defineProperty(t.prototype,"Source",{get:function(){return this.source},enumerable:!0,configurable:!0}),t.prototype.CreateDescriptor=function(t,i){var e=this.PropertyChanging,o=this.PropertyChanged,r=this.Wrapper,u=new n.PropertyChangedEventArgs(t),f=this.source;return{get:function(){return r?r(i):i},set:function(t){e.Raise(f,new n.PropertyChangingEventArgs(u.Name,i,t));i=t;o.Raise(f,u)},enumerable:!0,configurable:!0}},t}();n.Observable=t}(DomBehind||(DomBehind={}));Object.defineProperty(String.prototype,"ExtendedPrototype",{configurable:!0,enumerable:!1,writable:!0,value:function(n,t){var i=this;Object.defineProperty(n,i,{configurable:!0,enumerable:!1,writable:!0,value:t})}});"Where".ExtendedPrototype(Array.prototype,function(n){var t=this;return t.filter(function(t){return n(t)})});"Select".ExtendedPrototype(Array.prototype,function(n){var t=this;return t.map(function(t){return n(t)})});"Any".ExtendedPrototype(Array.prototype,function(n){var t=this;return n?t.some(function(t){return n(t)}):t.length!==0});"OrderBy".ExtendedPrototype(Array.prototype,function(n){var t=this;return t.sort(function(t,i){return n(t)-n(i)})});"OrderByDecording".ExtendedPrototype(Array.prototype,function(n){var t=this;return t.sort(function(t,i){return n(i)-n(t)})});"FirstOrDefault".ExtendedPrototype(Array.prototype,function(n){var t=this;return n&&(t=t.filter(function(t){return n(t)})),0<t.length?t[0]:null});"LastOrDefault".ExtendedPrototype(Array.prototype,function(n){var t=this;return n&&(t=t.filter(function(t){return n(t)})),0<t.length?t[t.length-1]:null});"GroupBy".ExtendedPrototype(Array.prototype,function(n){var i=this,t=[];return $.each(i,function(i,r){var u=n(r),f;t.some(function(n){return n.Key===u})||t.push({Key:u,Values:[]});f=t.FirstOrDefault(function(n){return n.Key===u});f.Values.push(r)}),t});"SequenceEqual".ExtendedPrototype(Array.prototype,function(n,t){var r=this,u,i,f,e;if(Object.IsNullOrUndefined(r)||Object.IsNullOrUndefined(n)||r.length!==n.length)return!1;for(u=!0,i=0;i<r.length;i++)if(f=r[i],e=n[i],t){if(!t(f,e)){u=!1;break}}else if(f!==e){u=!1;break}return u});"Sum".ExtendedPrototype(Array.prototype,function(n){var i=this,t=0;return i.forEach(function(i){t+=n(i)}),t});"Chunk".ExtendedPrototype(Array.prototype,function(n){var t=this;return n||(n=1),t.reduce(function(t,i,r){return r%n==0?t.push([i]):t[t.length-1].push(i),t},[])});Object.IsNullOrUndefined=function(n){return n==null?!0:n===null?!0:typeof n=="undefined"?!0:!1};Object.IsPromise=function(n){if(Object.IsNullOrUndefined(n)||typeof n=="object"&&typeof n.then!="function")return!1;var t=String($.Deferred().then),i=String(n.then);return t===i};String.IsNullOrEmpty=function(n){return!n};String.IsNullOrWhiteSpace=function(n){return String.IsNullOrEmpty(n)||n.replace(/\s/g,"").length<1};String.Split=function(n,t){return n.split(t)},function(n){n[n.None=0]="None";n[n.RemoveEmptyEntries=1]="RemoveEmptyEntries"}(StringSplitOptions||(StringSplitOptions={}));"Split".ExtendedPrototype(String.prototype,function(n,t){var i=this;return Object.IsNullOrUndefined(t)||t===StringSplitOptions.RemoveEmptyEntries?i.split(n).filter(function(n){return!String.IsNullOrWhiteSpace(n)}):i.split(n)});"Escape".ExtendedPrototype(String.prototype,function(){var n=this;return n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")});"UnEscape".ExtendedPrototype(String.prototype,function(){var n=this;return n.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")});"Replace".ExtendedPrototype(String.prototype,function(n,t){var i=this;return i.split(n).join(t)});"Repeat".ExtendedPrototype(String.prototype,function(n){"use strict";var t,i;if(this==null)throw new TypeError("can't convert "+this+" to object");if(t=""+this,n=+n,n!=n&&(n=0),n<0)throw new RangeError("repeat count must be non-negative");if(n==Infinity)throw new RangeError("repeat count must be less than infinity");if(n=Math.floor(n),t.length==0||n==0)return"";if(t.length*n>=268435456)throw new RangeError("repeat count must not overflow maximum string size");for(i="";;){if((n&1)==1&&(i+=t),n>>>=1,n==0)break;t+=t}return i});"PadLeft".ExtendedPrototype(String.prototype,function(n,t){return n=n>>0,t=String(typeof t!="undefined"?t:" "),this.length>n?String(this):(n=n-this.length,n>t.length&&(t+=t.Repeat(n/t.length)),t.slice(0,n)+String(this))});"PadRight".ExtendedPrototype(String.prototype,function(n,t){return n=n>>0,t=String(typeof t!="undefined"?t:" "),this.length>n?String(this):(n=n-this.length,n>t.length&&(t+=t.Repeat(n/t.length)),String(this)+t.slice(0,n))});"SubString".ExtendedPrototype(String.prototype,function(n,t){var i=this;return i.toString().substr(n,t)});z_indexKey="z_indexKey";$.GenerateZIndex=function(){var t=$.GetDomStorage(z_indexKey,500),n=t+1;return $.SetDomStorage(z_indexKey,n),n};$.GetLocalStorage=function(n,t){return window.localStorage.getItem(n)?JSON.parse(window.localStorage.getItem(n)):t};$.SetLocalStorage=function(n,t){window.localStorage.setItem(n,JSON.stringify(t))};$.GetSessionStorage=function(n,t){return window.sessionStorage.getItem(n)?JSON.parse(window.sessionStorage.getItem(n)):t};$.SetSessionStorage=function(n,t){window.sessionStorage.setItem(n,JSON.stringify(t))};$.GetDomStorage=function(n,t){var i=$("body").find("#DomStorage_"+n).val();return i?JSON.parse(i):t};$.SetDomStorage=function(n,t){if($("body").find("#DomStorage_"+n).length===0&&$("<input>",{type:"hidden",id:"DomStorage_"+n}).appendTo("body"),Object.IsNullOrUndefined(t)){var r="#DomStorage_"+n,i=$(r);if(i.length!==0){i.remove();return}}$("body").find("#DomStorage_"+n).val(JSON.stringify(t))};$.SetRootUri=function(n){n&&$.SetLocalStorage("RootUri",n)};$.GetRootUri=function(){return $.GetLocalStorage("RootUri")};$.AbsoluteUri=function(n){var t=$.GetLocalStorage("RootUri","");return""+t+n};w_dynamicPrefix="__Framework";$.GetWindowDynamic=function(n){var t=w_dynamicPrefix+"."+n;return window[t]};$.SetWindowDynamic=function(n,t){var i=w_dynamicPrefix+"."+n;window[i]=t};$.fn.ValidityState=function(){var t=this,n=t.validity;return Object.IsNullOrUndefined(n)&&$.each(t,function(t,i){return n=i.validity,Object.IsNullOrUndefined(n)?void 0:!1}),n};$.fn.HasError=function(){var n=this,t=n.ValidityState();return!t.valid};$.fn.SetCustomError=function(n){var t=this;Object.IsNullOrUndefined(t.setCustomValidity)?$.each(t,function(t,i){Object.IsNullOrUndefined(i.setCustomValidity)||i.setCustomValidity(n)}):t.setCustomValidity(n)};$.fn.ClearCustomError=function(){var n=this;n.SetCustomError("")};$.fn.CheckValidity=function(){var n=this,t=!0;Object.IsNullOrUndefined(n.checkValidity)?$.each(n,function(n,i){Object.IsNullOrUndefined(i.checkValidity)||(t=i.checkValidity())}):t=n.checkValidity()};$.fn.Raise=function(n){var t=this;t.trigger(n.EventName)},function(n){var t=function(){function n(n){this._ctor=n}return n.prototype.CreateInstance=function(){return new this._ctor},n}();n.TypedFactory=t}(DomBehind||(DomBehind={})),function(n){var t=function(){function t(){}return t.AddService=function(n,i,r){r===void 0&&(r=0);t.contextList.push({Context:n,GetType:i,Priority:r})},t.RemoveService=function(n){t.contextList=t.contextList.filter(function(t){return t.Context!==n})},t.GetService=function(i){var r=t.contextList.Where(function(n){return n.Context===i}).OrderBy(function(n){return n.Priority}).FirstOrDefault(),u;return r?(u=new n.TypedFactory(r.GetType()),u.CreateInstance()):null},t.CreateInstance=function(t){var i=new n.TypedFactory(t());return i.CreateInstance()},t.contextList=[],t}();n.Repository=t}(DomBehind||(DomBehind={})),function(n){var t;(function(n){var t=function(){function t(n){this._propertyName=n}return Object.defineProperty(t.prototype,"PropertyName",{get:function(){return this._propertyName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"GetValue",{get:function(){return this._getter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"SetValue",{get:function(){return this._setter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"UpdateSourceTrigger",{get:function(){return this._updateSourceTrigger},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BindingMode",{get:function(){return this._bindingMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Ensure",{get:function(){return this._ensure},enumerable:!0,configurable:!0}),t.RegisterAttached=function(i,r,u,f,e,o){f===void 0&&(f=n.UpdateSourceTrigger.Explicit);e===void 0&&(e=n.BindingMode.TwoWay);var s=new t(i);return s._getter=r,s._setter=u,s._updateSourceTrigger=f,s._bindingMode=e,s._ensure=o,s},t}();n.DependencyProperty=t})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(t){var i=function(){function i(){this.Trigger=t.UpdateSourceTrigger.Explicit;this.Mode=t.BindingMode.TwoWay;this.Validators=new n.Validation.ValidatorCollection}return i}();t.BindingPolicy=i})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(n){var t=function(){function t(){this.BindingPolicy=new n.BindingPolicy;this.Priolity=0;this._disposed=!1}return t.prototype.Dispose=function(){this._disposed||(this.DataContext=null,this.Element=null);this._disposed=!0},t}();n.BindingBehavior=t})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(i){function r(){var t=i!==null&&i.apply(this,arguments)||this;return t.Marks=[],t.AdditionalInfo=new collections.LinkedDictionary,t.UpdateSourceEvent=new n.TypedEvent,t.UpdateTargetEvent=new n.TypedEvent,t.Events=[],t}return __extends(r,i),Object.defineProperty(r.prototype,"PInfo",{get:function(){return this._pinfo},set:function(n){this._pinfo!==n&&(this._pinfo=n,n&&this.Marks.push(n.MemberPath))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"ValueCore",{get:function(){var n=this.Property.GetValue(this.Element);return Object.IsNullOrUndefined(this.BindingPolicy.Converter)||(n=this.BindingPolicy.Converter.ConvertBack(n)),n},enumerable:!0,configurable:!0}),r.prototype.UpdateSource=function(){if(this.BindingPolicy.Mode!==t.BindingMode.OneWay&&!Object.IsNullOrUndefined(this.Property)&&!Object.IsNullOrUndefined(this.Property.GetValue)&&(this.PInfo.SetValue(this.ValueCore),this.UpdateSourceEvent.Raise(this,this.ValueCore),this.DataContext instanceof n.NotifiableImp)){var i=new n.PropertyChangedEventArgs(this.PInfo.MemberPath);this.DataContext.PropertyChanged.Raise(this,i)}},r.prototype.UpdateTarget=function(){if(!Object.IsNullOrUndefined(this.Property)&&!Object.IsNullOrUndefined(this.Property.SetValue)){var n=this.PInfo.GetValue();Object.IsNullOrUndefined(this.BindingPolicy.Converter)||(n=this.BindingPolicy.Converter.Convert(n));this.Property.SetValue(this.Element,n,this);this.UpdateTargetEvent.Raise(this,n)}},r.prototype.Ensure=function(){var i=this,n;if(this.BindingPolicy.Trigger===t.UpdateSourceTrigger.LostForcus){n="focusout";this.Events.push(n);this.Element.off(n);this.Element.on(n,function(){i.UpdateSource()})}this.Property&&this.Property.Ensure&&this.Property.Ensure(this)},r.prototype.EventsOff=function(){var n=this;Object.IsNullOrUndefined(this.Element)||Object.IsNullOrUndefined(this.Events)||$.each(this.Events,function(t,i){String.IsNullOrEmpty(i)||n.Element.off(i)})},r.prototype.Dispose=function(){this._disposed||(this.EventsOff(),this.Property=null,this.PInfo&&this.PInfo.Dispose(),this.PInfo=null,this.Marks.length=0,i.prototype.Dispose.call(this))},r}(t.BindingBehavior);t.DataBindingBehavior=i})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(t){function i(){var n=t!==null&&t.apply(this,arguments)||this;return n.ActionPolicyCollection=[],n}return __extends(i,t),i.prototype.Ensure=function(){var n=this;if(this.ActionHandle=function(t){return n.OnTrigger(t)},this.Event&&this.Event&&this.Event.Ensure(this),this.Event&&!String.IsNullOrWhiteSpace(this.Event.EventName))this.Element.on(this.Event.EventName,function(t){return n.ActionHandle(t)});this.EventHandle=function(t,i){return n.Do(t,i)};this.Event&&this.Event.AddHandler(this.EventHandle);this.Element.is("a")&&!this.Element.attr("href")&&this.Element.attr("href","javascript:void(0);")},i.prototype.OnTrigger=function(n){this.Event.Raise(this,n)},Object.defineProperty(i.prototype,"ActionInvoker",{get:function(){if(!this._actionInvoker){var t=n.Application.Current.DefaultActionPolicy,i=this.ActionPolicyCollection.concat(t);this._actionInvoker=this.CreateActionInvoker(i)}return this._actionInvoker},enumerable:!0,configurable:!0}),i.prototype.CreateActionInvoker=function(n){var i=this,t=[];return n&&(t=t.concat(n)),t=t.OrderBy(function(n){return n.Priority()}),$.each(t,function(n,r){var u=n+1;u<t.length&&(r.NextPolicy=t[u]);r.Behavior=i}),t[0]},i.prototype.Do=function(n,t){var i=this;this.AllowBubbling||t.stopPropagation&&t.stopPropagation();this.ActionInvoker.Do(function(){var n;return i.Action&&(n=i.ActionParameterCount===1?i.Action(i.DataContext):i.ActionParameterCount===2?i.Action(i.DataContext,t):i.Action(i.DataContext)),n})},i.prototype.Dispose=function(){this._disposed||(Object.IsNullOrUndefined(this.Element)||(Object.IsNullOrUndefined(this.Event)||(String.IsNullOrWhiteSpace(this.Event.EventName)||this.Element.off(this.Event.EventName,this.ActionHandle),this.ActionHandle=null,this.Action=null,this.Event.RemoveHandler(this.EventHandle),this.EventHandle=null,this.Event=null),this.Element=null),this.ActionParameterCount=null,t.prototype.Dispose.call(this))},i}(t.BindingBehavior);t.ActionBindingBehavior=i})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.Ensure=function(){this.View=this.GetView(this.DataContext);this.ViewModel=this.GetViewModel(this.DataContext);this.View.Container=this.Element;this.View.DataContext=this.ViewModel;this.View.Ensure()},t.prototype.Dispose=function(){this._disposed||(Object.IsNullOrUndefined(this.View)||(this.View.Dispose(),this.View=null),Object.IsNullOrUndefined(this.ViewModel)||(this.ViewModel.Dispose(),this.ViewModel=null),this.GetView=null,this.GetViewModel=null,n.prototype.Dispose.call(this))},t}(n.BindingBehavior);n.ViewViewModelBindingBehavior=t})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=function(t){function i(){var n=t!==null&&t.apply(this,arguments)||this;return n._disposed=!1,n}return __extends(i,t),i.prototype.Ensure=function(){var t=this,n=[],i=this.toArray().GroupBy(function(n){return n.Element});i.forEach(function(t){var i=t.Values.OrderBy(function(n){return n.Priolity});i.forEach(function(t){n.push(t)})});this.clear();n.forEach(function(n){t.add(n);n.Ensure()})},i.prototype.ListDataBindingBehavior=function(t){var i=this.toArray().filter(function(t){return t instanceof n.DataBindingBehavior});return String.IsNullOrWhiteSpace(t)||(i=i.filter(function(n){return n.Marks.some(function(n){return n===t})})),i},i.prototype.UpdateTarget=function(n){var t=this.ListDataBindingBehavior(n);$.each(t,function(n,t){t.UpdateTarget()})},i.prototype.UpdateSource=function(n){var t=this.ListDataBindingBehavior(n);$.each(t,function(n,t){t.UpdateSource()})},i.prototype.Dispose=function(){this._disposed||($.each(this.toArray(),function(n,t){return t.Dispose()}),this.clear());this._disposed=!0},i}(collections.LinkedList);n.BindingBehaviorCollection=t})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={})),function(n){var i=function(){function i(n){this.Owner=n}return i.prototype.Element=function(n){return typeof n=="string"?(this.CurrentElement=this.Owner.Container.find(n),this.CurrentSelector=n):this.CurrentElement=n,this.CurrentBehavior=null,this},i.prototype.SetValue=function(n,t){return n.SetValue(this.CurrentElement,t,this.CurrentBehavior),this},i.prototype.Binding=function(t,i,r,u){var f=this.Add(new n.Data.DataBindingBehavior),e;return f.Property=t,f.PInfo=new n.LamdaExpression(this.Owner.DataContext,i),f.BindingPolicy.Trigger=Object.IsNullOrUndefined(u)?t.UpdateSourceTrigger:u,f.BindingPolicy.Mode=Object.IsNullOrUndefined(r)?t.BindingMode:r,e=new n.Data.DataBindingBehaviorBuilder(this.Owner),e.CurrentBehavior=this.CurrentBehavior,e.CurrentElement=this.CurrentElement,e.PartialMark(f.PInfo.MemberPath)},i.prototype.SetConverter=function(n){return this.CurrentBehavior.BindingPolicy.Converter=n,this},i.prototype.ConvertTarget=function(i){if(this.CurrentBehavior.BindingPolicy.Converter)throw new n.Exception("Another 'IValueConverter' has already been assigned.");var r=new t;return r.ConvertHandler=i,this.CurrentBehavior.BindingPolicy.Converter=r,this},i.prototype.ConvertSource=function(i){if(this.CurrentBehavior.BindingPolicy.Converter)throw new n.Exception("Another 'IValueConverter' has already been assigned.");var r=new t;return r.ConvertBackHandler=i,this.CurrentBehavior.BindingPolicy.Converter=r,this},i.prototype.BindingViewViewModel=function(t,i){var r=this.Add(new n.Data.ViewViewModelBindingBehavior);return r.GetView=t,r.GetViewModel=i,this},i.prototype.BindingAction=function(t,i,r){var u,f;return r===void 0&&(r=!1),u=this.Add(new n.Data.ActionBindingBehavior),u.Event=t.Create(),u.Action=i,u.ActionParameterCount=i.length,u.AllowBubbling=r,f=new n.Data.ActionBindingBehaviorBuilder(this.Owner),f.CurrentBehavior=this.CurrentBehavior,f.CurrentElement=this.CurrentElement,f},i.prototype.Add=function(n){return this.CurrentBehavior=n,n.DataContext=this.Owner.DataContext,n.Element=this.CurrentElement,this.Owner.BindingBehaviors.add(n),n},i}(),t;n.BindingBehaviorBuilder=i;t=function(){function n(){}return n.prototype.Convert=function(n){return this.ConvertHandler(n)},n.prototype.ConvertBack=function(n){return this.ConvertBackHandler(n)},n}()}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.CurrentBehavior},enumerable:!0,configurable:!0}),t.prototype.PartialMark=function(){for(var i=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return $.each(t,function(n,t){i.Behavior.Marks.push(t)}),this},t.prototype.Converter=function(n){return this.Behavior.BindingPolicy.Converter=n,this},t.prototype.AddValidator=function(n){return this.Behavior.BindingPolicy.Validators.add(n),n.Behavior=this.Behavior,n},t}(n.BindingBehaviorBuilder);t.DataBindingBehaviorBuilder=i})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(n){function t(t){return n.call(this,t)||this}return __extends(t,n),Object.defineProperty(t.prototype,"Behavior",{get:function(){return this.CurrentBehavior},enumerable:!0,configurable:!0}),t.prototype.ActionPolicy=function(){for(var i=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return $.each(t,function(n,t){i.Behavior.ActionPolicyCollection.push(t)}),this},t}(n.BindingBehaviorBuilder);t.ActionBindingBehaviorBuilder=i})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(n){var t=function(){function t(){}return t.prototype.Do=function(t){var i=this,r,o,u,f;try{if(this.Begin(),r=Object.IsNullOrUndefined(this.NextPolicy)?t():this.NextPolicy.Do(t),Object.IsPromise(r))return o=void 0,u=r,u.done(function(){i.Done();i.Always()}).fail(function(t){var r=new n.ActionPolicyExceptionEventArgs(i,t);return i.Fail(r),i.Always(),r.Handled?void 0:r}),u;this.Done();this.Always()}catch(e){if(f=new n.ActionPolicyExceptionEventArgs(this,e),this.Fail(f),this.Always(),!f.Handled)throw e;}},t}();n.ActionPolicy=t})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(n){function t(t,i){var r=n.call(this)||this;return r.Data=i,r.Handled=!1,r.Sender=t,r}return __extends(t,n),t}(n.EventArgs);t.ActionPolicyExceptionEventArgs=i})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(t){function i(){var n=t!==null&&t.apply(this,arguments)||this;return n._priority=1,n}return __extends(i,t),i.prototype.Priority=function(){return this._priority},i.prototype.Begin=function(){},i.prototype.Done=function(){},i.prototype.Fail=function(t){if(this.Behavior.DataContext){var i=this.Behavior.DataContext;if(i.Catch&&i.Catch(t),t.Handled)return}n.Application.Current.UnhandledException(t.Data);t.Handled=!0},i.prototype.Always=function(){},i}(t.ActionPolicy);t.ExceptionHandlingActionPolicy=i})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(t){function i(){var n=t!==null&&t.apply(this,arguments)||this;return n._priority=50,n}return __extends(i,t),i.prototype.Priority=function(){return this._priority},i.prototype.Begin=function(){},i.prototype.Done=function(){},i.prototype.Fail=function(t){var r=this,i;this.Supported&&(t.Data instanceof n.Validation.AggregateValidationException?(i=t.Data,$.each(i.Items,function(n,t){r.SetCustomError(t)}),t.Handled=!0):t.Data instanceof n.Validation.ValidationException&&(this.SetCustomError(t.Data),t.Handled=!0))},i.prototype.SetCustomError=function(n){this.Owner.find(n.Selector).SetCustomError(n.Message)},Object.defineProperty(i.prototype,"Supported",{get:function(){return this.ViewModel?this.View?this.Owner?!0:!1:!1:!1},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ViewModel",{get:function(){return this.Behavior.DataContext},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"View",{get:function(){return this.ViewModel.View},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Owner",{get:function(){return this.View.Container},enumerable:!0,configurable:!0}),i.prototype.Always=function(){},i}(t.ActionPolicy);t.ValidationExceptionHandlingActionPolicy=i})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var u=function(){function n(){this.Color="rgba(255, 255, 255, 0.8)";this.Custom="";this.Fade=!0;this.Fontawesome="";this.Image=null;this.ImagePosition="center center";this.MaxSize="100px";this.MinSize="20px";this.ResizeInterval=50;this.Size="50%";this.ZIndex=65535}return n}(),i=function(n){function t(t){var i=n.call(this)||this;return i._priority=100,i._option=$.extend(!0,{},new u,t),i}return __extends(t,n),Object.defineProperty(t.prototype,"Option",{get:function(){return this._option},enumerable:!0,configurable:!0}),t.prototype.Priority=function(){return this._priority},t.prototype.Begin=function(){var r=this,t=this.Container(),n=$("<div>",{"class":"loadingoverlay",css:{"background-color":this.Option.Color,display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}}),i;this.Option.ZIndex!==undefined&&n.css("z-index",this.Option.ZIndex);this.Option.Image&&n.css({"background-image":"url("+this.Option.Image+")","background-position":this.Option.ImagePosition,"background-repeat":"no-repeat"});this.Option.Fontawesome&&$("<div>",{"class":"loadingoverlay_fontawesome "+this.Option.Fontawesome}).appendTo(n);this.Option.Custom&&$(this.Option.Custom).appendTo(n);this.IsWholePage()?n.css({position:"fixed",top:0,left:0,width:"100%",height:"100%"}):n.css("position",t.css("position")=="fixed"?"fixed":"absolute");this.Resize(n);this.Option.ResizeInterval>0&&(i=setInterval(function(){return r.Resize(n)},this.Option.ResizeInterval),t.data("LoadingOverlayResizeIntervalId",i));this.Option.Fade?this.Option.Fade===!0?this.Option.Fade=[400,200]:(typeof this.Option.Fade=="string"||typeof this.Option.Fade=="number")&&(this.Option.Fade=[this.Option.Fade,this.Option.Fade]):this.Option.Fade=[0,0];t.data({LoadingOverlay:n,LoadingOverlayFadeOutDuration:this.Option.Fade[1]});n.hide().appendTo("body").fadeIn(this.Option.Fade[0])},t.prototype.Resize=function(n){var t=this.Container(),f=this.IsWholePage(),r,u,i;f||(r=t.css("position")=="fixed"?t.position():t.offset(),n.css({top:r.top+parseInt(t.css("border-top-width"),10),left:r.left+parseInt(t.css("border-left-width"),10),width:t.innerWidth(),height:t.innerHeight()}));u=f?$(window):t;i="auto";this.Option.Size&&this.Option.Size!="auto"&&(i=Math.min(u.innerWidth(),u.innerHeight())*parseFloat(this.Option.Size)/100,this.Option.MaxSize&&i>parseInt(this.Option.MaxSize,10)&&(i=parseInt(this.Option.MaxSize,10)+"px"),this.Option.MinSize&&i<parseInt(this.Option.MinSize,10)&&(i=parseInt(this.Option.MinSize,10)+"px"));n.css("background-size",i);n.children(".loadingoverlay_fontawesome").css("font-size",i)},t.prototype.Done=function(){},t.prototype.Fail=function(){},t.prototype.Always=function(){var n=this.Container(),t=n.data("LoadingOverlayResizeIntervalId");t&&clearInterval(t);n.data("LoadingOverlay").fadeOut(n.data("LoadingOverlayFadeOutDuration"),function(){$(this).remove()});n.removeData(["LoadingOverlay","LoadingOverlayFadeOutDuration","LoadingOverlayResizeIntervalId"])},t}(n.ActionPolicy),t,r;n.WaitingOverlayActionPolicy=i;t=function(n){function t(t,i){var r=n.call(this,i)||this;return r._container=t,r.Option.Image="/Content/images/preloader.gif",r}return __extends(t,n),t.prototype.Container=function(){return this._container},t.prototype.IsWholePage=function(){return!1},t}(i);n.ElementWaitingOverlayActionPolicy=t;r=function(n){function t(t){return n.call(this,$(document),t)||this}return __extends(t,n),t.prototype.IsWholePage=function(){return!0},t}(t);n.WindowWaitingOverlayActionPolicy=r})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(n){n.ActionBindingBehaviorBuilder.prototype.WaitingOverlay=function(t){var i=this;return t||(t=new n.WindowWaitingOverlayActionPolicy),i.ActionPolicy(t),i}})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(n){function t(){return n.call(this,"This exception is a safe exception issued to prevent double press")||this}return __extends(t,n),t}(n.Exception),r=function(t){function r(){var i=t!==null&&t.apply(this,arguments)||this;return i._priority=10,i.IsEnabled=n.UIElement.IsEnabledProperty,i.referencecount=0,i.engaged=!1,i}return __extends(r,t),r.prototype.Priority=function(){return this._priority},r.prototype.Begin=function(){if(++this.referencecount,this.engaged)throw new i;this.engaged=!0;this.IsEnabled.SetValue(this.Behavior.Element,!1)},r.prototype.Done=function(){},r.prototype.Fail=function(n){n.Data instanceof i&&(n.Handled=!0)},r.prototype.Always=function(){--this.referencecount==0&&(this.engaged=!1,this.IsEnabled.SetValue(this.Behavior.Element,!0))},r}(t.ActionPolicy);t.SuppressDuplicateActionPolicy=r})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={})),function(n){var t=function(){function t(n,t){var r=new n,i=r.constructor.name;if(i==="Object")throw Error("dynamic object is not supported");this.DbName=t;this.TableName=i}return t.prototype.List=function(){var t=this,n=$.Deferred(),i=this.Open();return i.done(function(i){if(!i.objectStoreNames.contains(t.TableName)){n.reject();return}var u=i.transaction(t.TableName,"readwrite"),f=u.objectStore(t.TableName),r=f.getAll();r.onsuccess=function(){var t=r.result;n.resolve(t)};r.onerror=function(){n.reject()}}).fail(function(){n.reject()}),n.promise()},t.prototype.Truncate=function(){var t=this,n=$.Deferred(),i=this.Open();return i.done(function(i){if(!i.objectStoreNames.contains(t.TableName)){n.reject();return}var u=i.transaction(t.TableName,"readwrite"),f=u.objectStore(t.TableName),r=f.clear();r.onsuccess=function(){n.resolve()};r.onerror=function(){n.reject()}}).fail(function(){n.reject()}),n.promise()},t.prototype.FindRowAsync=function(n,t){var i=$.Deferred();return this.FindRowsAsync(n,t).done(function(n){i.resolve(n.FirstOrDefault())}).fail(function(n){i.reject(n)}),i.promise()},t.prototype.FindRowsAsync=function(t,i){var r=this,f=n.LamdaExpression.Path(t),u=$.Deferred(),e=this.Open();return e.done(function(n){var o,t,e;if(!n.objectStoreNames.contains(r.TableName)){u.reject();return}o=n.transaction(r.TableName,"readwrite");t=o.objectStore(r.TableName);t.keyPath===f?(e=t.get(i),e.onsuccess=function(){var n=[e.result];u.resolve(n)},e.onerror=function(n){u.reject(n)}):t.indexNames.contains(f)?r.FetchCursor(t.index(f),i,u):(n.close(),r.Upgrade(n.version+1,function(n){var s=n.target.result,t=n.target.transaction,e=t.objectStore(r.TableName),o=e.createIndex(f,f,{unique:!1});r.FetchCursor(o,i,u)}))}).fail(function(n){u.reject(n)}),u.promise()},t.prototype.FetchCursor=function(t,i,r){var u=new n.List,f=t.openCursor(i);f.onsuccess=function(n){var t=n.target.result,i;t?(i=t.value,Object.IsNullOrUndefined(i)||u.add(i),t.continue()):r.resolve(u.toArray())};f.onerror=function(n){r.reject(n)}},t.prototype.UpsertAsync=function(t,i){var r=this,f,u,e;return i&&(f=n.LamdaExpression.Path(i)),u=$.Deferred(),e=this.Open(),e.done(function(n){if(!n.objectStoreNames.contains(r.TableName)){n.close();r.Upgrade(n.version+1,function(n){var e=n.target.result,o;o=f?e.createObjectStore(r.TableName,{keyPath:f}):e.createObjectStore(r.TableName,{keyPath:"__identity",autoIncrement:!0});o.transaction.oncomplete=function(){e.close();r.UpsertAsync(t,i).done(function(){return u.resolve()}).fail(function(n){return u.reject(n)})}});return}var e=n.transaction(r.TableName,"readwrite"),o=e.objectStore(r.TableName);o.put(t);u.resolve()}).fail(function(n){u.reject(n)}),u.promise()},t.prototype.DeleteAsync=function(n){var t=this,i=$.Deferred(),r=this.Open();return r.done(function(r){var f=r.transaction(t.TableName,"readwrite"),u,e;f.objectStoreNames.contains(t.TableName)?(u=f.objectStore(t.TableName),e=n[""+u.keyPath],u.delete(e),i.resolve()):i.reject("table not found. "+t.TableName)}).fail(function(n){i.reject(n)}),i.promise()},t.prototype.Open=function(){var n=$.Deferred(),i=window.indexedDB,t=i.open(this.DbName);return t.onsuccess=function(){var i=t.result;n.resolve(i);i.close()},t.onblocked=function(t){n.reject(t)},t.onerror=function(t){n.reject(t)},n.promise()},t.prototype.Upgrade=function(n,t){var r=window.indexedDB,i=r.open(this.DbName,n);i.onsuccess=function(n){var t=n};i.onupgradeneeded=function(n){var i=n.target.result;t(n);i.close()};i.onerror=function(){}},t}();n.IndexedDBHelper=t}(DomBehind||(DomBehind={})),function(n){var t;(function(n){var t;(function(n){n[n.CenterScreen=0]="CenterScreen";n[n.Manual=1]="Manual"})(t=n.ModalStartupLocation||(n.ModalStartupLocation={}))})(t=n.Navigation||(n.Navigation={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(t){var r="ModalClose",i="ReferenceCountKey",u=function(){function u(){this.DefaultSetting={FadeInDuration:100,FadeOutDuration:100,AllowCloseByClickOverlay:!0,ShowCloseButton:!0,ShowHeader:!0,StartupLocation:t.ModalStartupLocation.CenterScreen,StartupLocationTop:null,StartupLocationLeft:null}}return u.prototype.NewWindow=function(n,t,i){return String.IsNullOrWhiteSpace(n)||n==="about:blank"||(n=$.AbsoluteUri(n)),window.open(n,t,i)},u.prototype.Move=function(n,t){(n=$.AbsoluteUri(n),location.href!==n)&&(t?location.href=n:location.replace(n))},u.prototype.Reload=function(n){location.reload(n)},u.prototype.ShowModal=function(u,f){var o=$.extend(!0,this.DefaultSetting,f),s=$("<div>",{"class":"modal-overlay"}),e,l,v,y,a,h,c;if(s.css("z-index",$.GenerateZIndex()),$("body").css("overflow","hidden"),s.appendTo("body").fadeIn(o.FadeInDuration,function(){$.SetDomStorage(i,$.GetDomStorage(i,0)+1)}),typeof u=="string"){if(v=$.ajax({url:$.AbsoluteUri(u),async:!1,type:"GET",cache:!1,error:function(t,i,r){l=new n.AjaxException(t,i,r)}}),l)throw l;y=v.responseText;e=$(y)}else e=u;e.find(".close").on("click",function(n,t){$(n.target).trigger(r,t)});o.ShowCloseButton||e.find(".close").hide();o.StartupLocation===t.ModalStartupLocation.Manual&&(Object.IsNullOrUndefined(o.StartupLocationTop)&&Object.IsNullOrUndefined(o.StartupLocationLeft)?(a=$.GetDomStorage(i,0)+1,e.find(".modal-dialog").css("top",-50+a*5+"%").css("left",-25+a*5+"%")):e.find(".modal-dialog").css("top",o.StartupLocationTop).css("left",o.StartupLocationLeft));h=e.find(".modal-dialog");h.draggable&&h.draggable({handle:".modal-header",cursor:"move"});o.Width&&h.css("width",f.Width);o.Height&&h.css("height",f.Height);o.ShowHeader||(e.find(".modal-header").hide(),e.find(".modal-body").css("height","100%"));o.AllowCloseByClickOverlay&&(s.click(s,function(n){$(n.target).trigger(r)}),e.click(function(n){n.stopPropagation()}));c=$.Deferred();s.off(r);s.on(r,{me:s,option:o,target:e},function(n,t){var f=$.Event("modalClosing"),o=n.data.target.find(".modal-body"),e,u;if($(o.children()[0]).trigger(f),f.result===!1){c.reject();return}c.resolve(t);e=n.data.option;u=n.data.me;u.off(r);u.fadeOut(e.FadeOutDuration,function(){u.remove();$.SetDomStorage(i,$.GetDomStorage(i,0)-1);$.GetDomStorage(i,0)===0&&$("body").css("overflow","auto")})});return s.append(e),e.hide().show(0),c.promise()},u}();t.DefaultNavigator=u})(t=n.Navigation||(n.Navigation={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(n){var t=function(){function n(n){this._disposed=!1;this.Attribute=n}return Object.defineProperty(n.prototype,"AttributeValue",{get:function(){var n=this.ParseAttributeValue();return Object.IsNullOrUndefined(n)?"":n},enumerable:!0,configurable:!0}),n.prototype.ParseAttributeValue=function(){if(Object.IsNullOrUndefined(this.AttributeExpression))return null;var n=this.AttributeExpression;return typeof n=="string"||typeof n=="number"?this.AttributeExpression:this.AttributeExpression(this.Behavior.DataContext)},n.prototype.OnValidationg=function(){if(this.HasError=!1,this.Apply(),this.HasError=!this.Validate(this.Behavior.ValueCore),this.HasError){var n=this.ValidationMessage(this.Behavior.Element.ValidityState());String.IsNullOrWhiteSpace(n)||this.Behavior.Element.SetCustomError(n)}},n.prototype.Apply=function(){if(!Object.IsNullOrUndefined(this.AllowApply)){var n=this.AllowApply(this.Behavior.DataContext);if(!n){this.RemoveValidation();return}}this.AddValidation()},n.prototype.RemoveValidation=function(){String.IsNullOrWhiteSpace(this.Attribute)||this.Behavior.Element.removeAttr(this.Attribute);this.Behavior.Element.ClearCustomError()},n.prototype.AddValidation=function(){this.RemoveValidation();String.IsNullOrWhiteSpace(this.Attribute)||this.Behavior.Element.attr(this.Attribute,this.AttributeValue)},n.prototype.Validate=function(){return!this.Behavior.Element.HasError()},n.prototype.ValidationMessage=function(){if(Object.IsNullOrUndefined(this.Message))return null;var n=this.Message;return typeof n=="string"?this.Message:this.Message(this.Behavior.DataContext)},n.prototype.Dispose=function(){!this._disposed;this._disposed=!0},n}();n.Validator=t})(t=n.Validation||(n.Validation={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=function(n){function t(){var t=n!==null&&n.apply(this,arguments)||this;return t._disposed=!1,t}return __extends(t,n),t.prototype.ClearValidator=function(){$.each(this.toArray(),function(n,t){return t.RemoveValidation()})},t.prototype.ApplyValidator=function(){$.each(this.toArray(),function(n,t){return t.Apply()})},t.prototype.Validate=function(){var n=!0;return $.each(this.toArray(),function(t,i){i.OnValidationg();i.HasError&&(n=!1)}),n},t.prototype.Dispose=function(){this._disposed||($.each(this.toArray(),function(n,t){return t.Dispose()}),this.clear());this._disposed=!0},t}(collections.LinkedList);n.ValidatorCollection=t})(t=n.Validation||(n.Validation={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=function(n){function t(){return n.call(this,"maxlength")||this}return __extends(t,n),t.prototype.Dispose=function(){this._disposed||n.prototype.Dispose.call(this)},t}(n.Validator);n.MaxLengthValidator=t})(t=n.Validation||(n.Validation={}))}(DomBehind||(DomBehind={})),function(n){n.BindingBehaviorBuilder.prototype.MaxLength=function(t,i,r){var u=this,e=this,f,o;if(e.AddValidator&&(f=e.AddValidator(new n.Validation.MaxLengthValidator),f.AttributeExpression=t,f.Message=i,f.AllowApply=r),o=u.CurrentElement.attr("type"),o=="number"){u.CurrentElement.off("input");u.CurrentElement.on("input",function(){var n=$(this),i=String(n.val());i.length>t&&n.val(i.slice(0,t))})}else n.UIElement.MaxLengthProperty.SetValue(u.CurrentElement,t);return u};n.BindingBehaviorBuilder.prototype.MaxNumeric=function(t){var i=this,r;n.UIElement.MaxNumericProperty.SetValue(i.CurrentElement,t);r=t.toString().length;i.CurrentElement.off("input");i.CurrentElement.on("input",function(){var n=$(this),t=n.attr("max").length,i=String(n.val());i.length>t&&n.val(i.slice(0,t))});return i};n.BindingBehaviorBuilder.prototype.MinNumeric=function(t){var i=this;return n.UIElement.MinNumericProperty.SetValue(i.CurrentElement,t),i}}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=function(n){function t(){return n.call(this,"pattern")||this}return __extends(t,n),t.prototype.RemoveValidation=function(){n.prototype.RemoveValidation.call(this);this.Behavior.Element.removeAttr("title")},t.prototype.ValidationMessage=function(t){var i=n.prototype.ValidationMessage.call(this,t);return String.IsNullOrWhiteSpace(i)&&this.Behavior.Element.attr("title",this.AttributeValue),i},t.prototype.Dispose=function(){this._disposed||n.prototype.Dispose.call(this)},t}(n.Validator);n.RegexValidator=t})(t=n.Validation||(n.Validation={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(t){t.DataBindingBehaviorBuilder.prototype.Pattern=function(t,i,r){var f=this,u=f.AddValidator(new n.Validation.RegexValidator);return u.AttributeExpression=t,u.Message=i,u.AllowApply=r,f}})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t=function(n){function t(){return n.call(this,"required")||this}return __extends(t,n),t.prototype.Dispose=function(){this._disposed||n.prototype.Dispose.call(this)},t}(n.Validator);n.RequiredValidator=t})(t=n.Validation||(n.Validation={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(t){t.DataBindingBehaviorBuilder.prototype.Required=function(t,i){var r=this,u=r.AddValidator(new n.Validation.RequiredValidator);return u.Message=t,u.AllowApply=i,r}})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(n){n[n.PreLoad=1]="PreLoad";n[n.Reload=2]="Reload"})(t=n.PoolType||(n.PoolType={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(t){var i=function(){function t(){}return t.Register=function(t,i){var r=this;i===void 0&&(i=2);$("body").ready(function(){for(var u,e=new n.TypedFactory(t()),f=0;f<i;f++)u=e.CreateInstance(),(u.PoolType&n.PoolType.PreLoad)==n.PoolType.PreLoad&&u.Load(),r.Pool.push(u)})},t.Do=function(i,r){var u=null,f=[],e;return $.each(t.Pool,function(n,t){u?f.push(t):t instanceof i?u=t:f.push(t)}),t.Pool=f,u||(e=new n.TypedFactory(i),u=e.CreateInstance(),u.Load()),u.Do(r).always(function(){u.PoolType&n.PoolType.Reload&&(u.Terminate(),u.Load());t.Pool.push(u)})},t.Pool=[],t}();t.WorkerPool=i})(t=n.Threading||(n.Threading={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(t){var i=function(){function t(){this.PoolType=n.PoolType.Reload}return Object.defineProperty(t.prototype,"Thread",{get:function(){return this._thread},enumerable:!0,configurable:!0}),t.prototype.Load=function(){this._thread||(this._thread=new Worker(this.WorkerScript))},Object.defineProperty(t.prototype,"WorkerScript",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.Do=function(n){var t=$.Deferred();return this.Thread.onmessage=function(n){t.resolve(n.data)},this.Thread.onerror=function(n){console.error(n.filename+":("+n.lineno+")\n"+n.message);var i,r;try{$.each($(n.message),function(n,t){t instanceof HTMLTitleElement&&(i=t.text);t instanceof Comment&&(r=t.text)})}catch(u){console.error(u.message)}t.reject({ErrorMessage:i,Description:r})},this.Thread.postMessage(n),t.promise()},t.prototype.Terminate=function(){this._thread&&(this._thread.terminate(),this._thread=null)},t}();t.WorkerWrapper=i})(t=n.Threading||(n.Threading={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){n.Threading.WorkerPool.Register(function(){return i});var i=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),Object.defineProperty(t.prototype,"WorkerScript",{get:function(){return"~/Scripts/dombehind-PlainXMLHttpRequest.js"},enumerable:!0,configurable:!0}),t}(n.Threading.WorkerWrapper);t.PlainXMLHttpRequestWorker=i})(t=n.Web||(n.Web={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(t){var i=function(){function t(){this.Timeout=3e4}return t.prototype.Execute=function(t){var r,i=this.DefaultPostSetting,u;if(i.data=t,i.async=!1,i.error=function(t,i,u){r=new n.AjaxException(t,i,u)},u=$.ajax(i),r)throw r;return u.responseJSON},t.prototype.ExecuteAsync=function(t,i){var r=$.Deferred(),u=$.extend(!0,this.DefaultPostSetting,i);return u.data=JSON.stringify(t),u.async=!0,$.ajax(u).done(function(n){r.resolve(n)}).fail(function(t){r.reject(new n.AjaxException(t))}),r.promise()},t.prototype.ExecuteAjax=function(t,i){var r=$.Deferred(),u=$.extend(!0,this.DefaultPostSetting,i);return u.data=t,u.async=!0,$.ajax(u).done(function(n){r.resolve(n)}).fail(function(t){r.reject(new n.AjaxException(t))}),r.promise()},Object.defineProperty(t.prototype,"DefaultPostSetting",{get:function(){return{type:"POST",dataType:"json",cache:!1,url:$.AbsoluteUri(this.Url),timeout:this.Timeout,traditional:!0}},enumerable:!0,configurable:!0}),t}();t.WebService=i})(t=n.Web||(n.Web={}))}(DomBehind||(DomBehind={})),function(n){var t=function(){function t(){}return t.ValueProperty=n.Data.DependencyProperty.RegisterAttached("val",function(n){return n.val()},function(n,t){return n.val(t)},n.Data.UpdateSourceTrigger.LostForcus,n.Data.BindingMode.TwoWay),t.TextProperty=n.Data.DependencyProperty.RegisterAttached("text",function(n){return n.text()},function(n,t){return n.text(t)},n.Data.UpdateSourceTrigger.LostForcus,n.Data.BindingMode.TwoWay),t.SrcProperty=n.Data.DependencyProperty.RegisterAttached("src",function(n){return n.attr("src")},function(n,t){return n.attr("src",t)},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay),t.HrefProperty=n.Data.DependencyProperty.RegisterAttached("href",function(n){return n.attr("href")},function(n,t){return n.attr("href",t)},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay),t.IsEnabledProperty=n.Data.DependencyProperty.RegisterAttached("enabled",null,function(n,t){var i=t===!1?!0:!1;i===!0?(n.attr("disabled",""),n.addClass("disabled")):(n.removeAttr("disabled"),n.removeClass("disabled"))},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay),t.IsVisibleProperty=n.Data.DependencyProperty.RegisterAttached("display",function(n){return n.attr("display")==="none"?!1:!0},function(n,t){var i=t?!0:!1;if(i){n.attr("display","");try{n.show()}catch(r){}}else{n.attr("display","none");try{n.hide()}catch(r){}}},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.TwoWay),t.OpacityProperty=n.Data.DependencyProperty.RegisterAttached("opacity",function(){},function(n,t){n.css("opacity",t)},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay),t.PlaceHolderProperty=n.Data.DependencyProperty.RegisterAttached("placeholder",null,function(n,t){return n.attr("placeholder",t)},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay),t.IsCheckedProperty=n.Data.DependencyProperty.RegisterAttached("checked",function(n){return n.get(0).checked},function(n,t){return n.get(0).checked=t},n.Data.UpdateSourceTrigger.LostForcus,n.Data.BindingMode.TwoWay),t.MaxLengthProperty=n.Data.DependencyProperty.RegisterAttached("maxlength",null,function(n,t){return n.attr("maxlength",t)},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay),t.MaxNumericProperty=n.Data.DependencyProperty.RegisterAttached("maxlength",null,function(n,t){return n.attr("max",t)},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay),t.MinNumericProperty=n.Data.DependencyProperty.RegisterAttached("maxlength",null,function(n,t){return n.attr("min",t)},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay),t.HtmlSource=n.Data.DependencyProperty.RegisterAttached("htmlSource",null,function(t,i){var r={url:i,async:!0,type:"GET",cache:!0};$.ajax(r).done(function(n){var i=$(n).find("#_Layout");t.append($(n))}).fail(function(t){throw new n.AjaxException(t);})},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay),t.Click=n.EventBuilder.RegisterAttached("click"),t.Enter=n.EventBuilder.RegisterAttached("enterKeydown",function(n){n&&n.Element&&n.Element.keydown(function(t){t.which===13&&n.Element.trigger("enterKeydown")})}),t.Keydown=n.EventBuilder.RegisterAttached("keydown"),t.LostFocus=n.EventBuilder.RegisterAttached("focusout"),t.Initialize=n.EventBuilder.RegisterAttached("initialize"),t.Activate=n.EventBuilder.RegisterAttached("activate"),t.ModalClosing=n.EventBuilder.RegisterAttached("modalClosing"),t}();n.UIElement=t}(DomBehind||(DomBehind={})),function(n){n.BindingBehaviorBuilder.prototype.InputType=function(n){var r=this,i=t[n];return n===t.DateTimeLocal&&(i="DateTime-Local"),i=i.toLowerCase(),r.CurrentElement.removeAttr("type"),r.CurrentElement.attr("type",i),r};var t;(function(n){n[n.Hidden=0]="Hidden";n[n.Text=1]="Text";n[n.Search=2]="Search";n[n.Tel=3]="Tel";n[n.Url=4]="Url";n[n.Email=5]="Email";n[n.Password=6]="Password";n[n.DateTime=7]="DateTime";n[n.Date=8]="Date";n[n.Month=9]="Month";n[n.Week=10]="Week";n[n.Time=11]="Time";n[n.DateTimeLocal=12]="DateTimeLocal";n[n.Number=13]="Number";n[n.Range=14]="Range";n[n.Color=15]="Color";n[n.Checkbox=16]="Checkbox";n[n.Radio=17]="Radio";n[n.File=18]="File";n[n.Submit=19]="Submit";n[n.Image=20]="Image";n[n.Reset=21]="Reset";n[n.Button=22]="Button"})(t=n.InputType||(n.InputType={}))}(DomBehind||(DomBehind={})),function(n){n.BindingBehaviorBuilder.prototype.Scrolling=function(){var n=this;return n.CurrentElement.click(function(n){var r=n.target,t=r.hash,i=$(t).offset();i&&(n.preventDefault(),$("html, body").animate({scrollTop:i.top},900,function(){window.location.hash=t}))}),n};n.BindingBehaviorBuilder.prototype.SlideAnimation=function(){var n=this,t=n.CurrentElement;return $(window).scroll(function(){t.each(function(){var n=$(this).offset().top,t=$(window).scrollTop();n<t+600&&$(this).addClass("slide")})}),n}}(DomBehind||(DomBehind={})),function(n){var t;(function(t){var i=function(){function t(n){var t=this;this.Behavior=n;this.UpdateTargetEventHandle=function(n,i){return t.OnUpdateTarget(n,i)};n.UpdateTargetEvent.AddHandler(this.UpdateTargetEventHandle);this.UpdateSourceEventHandle=function(n){return t.UpdateSource(n)};n.Element.off("change",this.UpdateSourceEventHandle);n.Element.on("change",this.UpdateSourceEventHandle);this.PropertyChangedEventHandle=function(n,i){return t.OnDataSourcePropertyChanged(n,i)};this.AddedHandle=function(n,i){return t.Added(n,i)};this.RemovedHandle=function(n,i){return t.Removed(n,i)}}return t.Register=function(n){if(n.Element&&!n.AdditionalInfo[t.IgnoreMark]&&!n.AdditionalInfo[t.InstanceMark]){var i=n.Element.prop("tagName");if(i!=="SELECT"){n.AdditionalInfo[t.IgnoreMark]=!0;return}n.AdditionalInfo[t.InstanceMark]=new t(n)}},t.prototype.UpdateSource=function(){var t,r,i;if(this.Behavior.PInfo&&(t=this.Behavior.PInfo.GetValue(),t instanceof n.Data.ListCollectionView)){if(r=t,r.OnCurrentChanging().Cancel)return this.Select(r),!1;i=[];$.each(this.Behavior.Element.find("option"),function(n,t){if(t.selected){var f=t.getAttribute("uuid"),u=r.Find(function(n){return n.__uuid===f});u&&i.push(u)}});t.Begin();t.Current=this.Multiple?i:0<i.length?i[0]:null;t.End()}},t.prototype.OnUpdateTarget=function(t,i){if(i instanceof n.Data.ListCollectionView)this.Render(i);else if(i instanceof Array){var r=[];$.each(i,function(n,t){r.push({Value:t})});this.Render(new n.Data.ListCollectionView(r,"Value"))}},t.prototype.OnDataSourcePropertyChanged=function(n,t){t.Name==="Current"&&this.Select(n);t.Name||this.Render(n)},t.prototype.Render=function(n){var t=this,i;this.HasChanges(n)&&(this.Behavior.Element.empty(),i=n.ToArray(),n.Grouping?$.each(i.GroupBy(n.Grouping),function(i,r){var u=$("<optgroup>",{label:r.Key}).appendTo(t.Behavior.Element);$.each(r.Values,function(i,r){t.RenderOption(u,n,r)})}):$.each(i,function(i,r){t.RenderOption(t.Behavior.Element,n,r)}),this.Select(n))},Object.defineProperty(t.prototype,"Multiple",{get:function(){return this.Behavior.Element.prop("multiple")?!0:!1},set:function(n){this.Behavior.Element.prop("multiple",n)},enumerable:!0,configurable:!0}),t.prototype.RenderOption=function(i,r,u){u.__uuid||(u=$.extend(u,ExtendIIdentity()));u.DisplayMemberPath||(u=$.extend(u,this.EnsureDisplayMemberPath(r.DisplayMemberPath)));var f=$('<option uuid="'+u.__uuid+'">'+t.GetDisplayValue(u,r.DisplayMemberPath)+"<\/option>");f.appendTo(i);u=$.extend(u,this.EnsureElement(f));u instanceof n.NotifiableImp&&(u.__EventMarked||(u.__EventMarked=!0,u.PropertyChanged.AddHandler(function(n){var i=n,r=t.GetDisplayValue(n,i.DisplayMemberPath);i.__Selector.val(r)})))},t.prototype.EnsureDisplayMemberPath=function(n){return{DisplayMemberPath:n}},t.prototype.EnsureElement=function(n){return{__Selector:n,__Element:n[0]}},t.prototype.Added=function(n){this.Render(n)},t.prototype.Removed=function(n){this.Render(n)},t.prototype.Select=function(n){return this.Multiple?this.MultipleSelect(n):this.SingleSelect(n)},t.prototype.SingleSelect=function(t){var i=t.Current;Object.IsNullOrUndefined(i)?this.Behavior.Element.selectpicker("val",null):(i.__Element.selected=!0,this.Behavior.Element.selectpicker("refresh"));t.ViewReflected=n.Data.ListCollectionView.ViewReflectedStatus.Reflected},t.prototype.MultipleSelect=function(t){var i=t.Current;Object.IsNullOrUndefined(i)?this.Behavior.Element.selectpicker("deselectAll"):$.each(i,function(n,t){var i=t;i.__Element.selected=!0});this.Behavior.Element.selectpicker("refresh");t.ViewReflected=n.Data.ListCollectionView.ViewReflectedStatus.Reflected},t.prototype.HasChanges=function(t){return t.ViewReflected===n.Data.ListCollectionView.ViewReflectedStatus.Reflected?!1:(t.ViewReflected===n.Data.ListCollectionView.ViewReflectedStatus.None&&(t.ViewReflected=n.Data.ListCollectionView.ViewReflectedStatus.NoReflected,t.Begin().Refresh().End(),this.Subscribe(t)),!0)},t.prototype.Subscribe=function(n){this.UnSubscribe(n);n.Removed.AddHandler(this.RemovedHandle);n.Added.AddHandler(this.AddedHandle);n.PropertyChanged.AddHandler(this.PropertyChangedEventHandle)},t.prototype.UnSubscribe=function(n){n.Added.RemoveHandler(this.AddedHandle);n.Removed.RemoveHandler(this.RemovedHandle);n.PropertyChanged.RemoveHandler(this.PropertyChangedEventHandle)},t.GetDisplayValue=function(t,i){var r=t;return i&&(r=new n.PropertyInfo(t,i).GetValue()),r},t.ItemsSourceProperty=n.Data.DependencyProperty.RegisterAttached("itemsSource",null,function(){},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay,function(n){t.Register(n)}),t.AllowMultipleProperty=n.Data.DependencyProperty.RegisterAttached("multiple",null,function(n,t){var i=n.prop("multiple");i!==t&&(t===!0?n.prop("multiple",!0):n.prop("multiple",!1),n.selectpicker("destroy"),n.selectpicker())},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay),t.IgnoreMark="Selector.Ignore",t.InstanceMark="Selector.Instance",t}();t.Selector=i})(t=n.Controls||(n.Controls={}))}(DomBehind||(DomBehind={})),function(n){var t;(function(t){var i=n.Controls.Selector;t.DataBindingBehaviorBuilder.prototype.Multiple=function(r){var u=this,f=u.Add(new t.DataBindingBehavior);return f.Property=i.AllowMultipleProperty,f.Priolity=-1,f.PInfo=r?new n.LamdaExpression(u.Owner.DataContext,r):new n.BooleanFakeExpression(!0),u}})(t=n.Data||(n.Data={}))}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(t){var i=function(t){function i(){var n=t!==null&&t.apply(this,arguments)||this;return n.Options=[],n}return __extends(i,t),i.Register=function(n){if(n.Element&&!n.AdditionalInfo[i.IgnoreMark]&&!n.AdditionalInfo[i.InstanceMark]){var t=n.Element.prop("tagName");if(t!=="DIV"){n.AdditionalInfo[i.IgnoreMark]=!0;return}n.AdditionalInfo[i.InstanceMark]=new i(n)}},i.prototype.Render=function(n){var i,t;if(this.HasChanges(n)){for(this.Behavior.Element.empty(),this.HeaderContainer=$('<ul class="nav nav-tabs">'),this.ContentContainer=$('<div class="tab-content">'),this.Options.length=0,i=n.ToArray(),t=0;t<i.length;t++)this.NewAdd(n,i[t],t===0);this.HeaderContainer.appendTo(this.Behavior.Element);this.ContentContainer.appendTo(this.Behavior.Element)}},i.prototype.NewAdd=function(n,t,r){r===void 0&&(r=!1);var u=new i.BindingOption(this);return u.Source=n,u.Option=t,u.IsActive=r,u.Ensure(),this.Options.push(u),u},i.prototype.Added=function(n,t){this.NewAdd(n,t)},i.prototype.Removed=function(n,t){t.__header.detach();t.__content.detach()},i.ItemsSourceProperty=n.Data.DependencyProperty.RegisterAttached("itemsSource",null,function(){},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay,function(n){i.Register(n)}),i.IgnoreMark="Tab.Ignore",i.InstanceMark="Tab.Instance",i}(t.Selector);t.Tab=i,function(i){var r=function(){function i(n){this.Parent=n}return Object.defineProperty(i.prototype,"HeaderContainer",{get:function(){return this.Parent.HeaderContainer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ContentContainer",{get:function(){return this.Parent.ContentContainer},enumerable:!0,configurable:!0}),i.prototype.Ensure=function(){var n=this,r,u,i;this.Option.__uuid||(this.Option.__uuid=NewUid());this.Option.DisplayMemberPath||(this.Option.DisplayMemberPath=this.Source.DisplayMemberPath);r=this.IsActive?"active":"";this.Header=$('<li class="'+r+'" uuid="'+this.Option.__uuid+'">').appendTo(this.HeaderContainer);this.Option.__header=this.Header;u=this.IsActive?"tab-pane fade in active":"tab-pane fade";this.Content=$('<div class="'+u+'" id="'+this.Option.__uuid+'">').appendTo(this.ContentContainer);this.Option.__content=this.Content;this.Content.on("RegisteredViewViewModel",function(i,r){var f=$(i.target),u;f.off("RegisteredViewViewModel");n.Option.View=r.View;n.Option.ViewModel=r.ViewModel;u=t.Selector.GetDisplayValue(r.ViewModel,n.Option.DisplayMemberPath);$('<a href="#'+n.Option.__uuid+'" data-toggle="tab">').text(u).appendTo(n.Header);n.PropertyChangedSafeHandle=function(t,i){return n.OnRecievePropertyChanged(i)};r.ViewModel.PropertyChanged.AddHandler(n.PropertyChangedSafeHandle)});i=this.Option;i.Uri&&this.Content.load(i.Uri)},i.prototype.OnRecievePropertyChanged=function(i){var u,r;switch(i.Name){case this.Option.DisplayMemberPath:u=t.Selector.GetDisplayValue(this.Option.ViewModel,this.Option.DisplayMemberPath);this.Header.find("a").text(u);break;case n.LamdaExpression.Path(function(n){return n.IsEnabled}):r=this.Option.ViewModel.IsEnabled;n.UIElement.IsEnabledProperty.SetValue(this.Header.find("a"),r);n.UIElement.IsEnabledProperty.SetValue(this.Header,r)}},i}();i.BindingOption=r}(i=t.Tab||(t.Tab={}))})(t=n.Controls||(n.Controls={}))}(DomBehind||(DomBehind={})),function(n){var t,i,r;(function(n){n[n.Infomation=0]="Infomation";n[n.Warning=1]="Warning";n[n.Error=2]="Error"})(t=n.MessageStatus||(n.MessageStatus={}));i=function(){function i(){}return i.ShowInfomation=function(n,r){i.ShowMessage(n,r,t.Infomation)},i.ShowWarning=function(n,r){i.ShowMessage(n,r,t.Warning)},i.ShowError=function(n,r){i.ShowMessage(n,r,t.Error)},i.ShowMessage=function(n,t,r){i.Container.ShowMessage(n,t,r)},i.ShowYesNo=function(n,t,r){i.Container.ShowYesNo(n,t,r)},i.ShowOkCancel=function(n,t,r){i.Container.ShowOkCancel(n,t,r)},i.BuiltIn=function(n){i._lazy=n},Object.defineProperty(i,"Container",{get:function(){if(i._container)return i._container;if(!i._lazy)throw new n.Exception("");var t=new n.TypedFactory(i._lazy());return i._container=t.CreateInstance(),i._container},enumerable:!0,configurable:!0}),i}();n.MessaageBox=i;i.BuiltIn(function(){return r});r=function(){function n(){}return n.prototype.ShowMessage=function(n){window.alert(n)},n.prototype.ShowYesNo=function(n,t,i){window.confirm(n)?i&&i.yesCallback&&i.yesCallback():i&&i.noCallBack&&i.noCallBack()},n.prototype.ShowOkCancel=function(n,t,i){window.confirm(n)?i&&i.okCallback&&i.okCallback():i&&i.cancelCallBack&&i.cancelCallBack()},n}();n.DefaultMessageContainer=r}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),Object.defineProperty(i.prototype,"ItemsSource",{get:function(){return this._items},set:function(n){var r=this,t,i;if(Object.IsNullOrUndefined(n)){this.Clear();this._items=n;return}(t=n.ToArray(),Object.IsNullOrUndefined(this._items)||!t.SequenceEqual(this._items.ToArray()))&&(this.Clear(),i=this.Element.find("#"+this.BodyId),$.each(t,function(n,t){var u=$("<tr><\/tr>");$.each(r.Columns,function(n,i){var f=$("<td><\/td>"),r;i.cellClass&&f.addClass(i.cellClass);r=i.value(t);i.convertTarget&&(r=i.convertTarget(r));f.text(r);u.append(f)});i.append(u)}))},enumerable:!0,configurable:!0}),i.prototype.Clear=function(){var n=this.Element.find("#"+this.BodyId);n.empty()},Object.defineProperty(i.prototype,"DefaultTableOption",{get:function(){return{"class":""}},enumerable:!0,configurable:!0}),i.prototype.Ensure=function(){var i,n,r,u,f;t.prototype.Ensure.call(this);this.Element.empty();this.Element.hasClass("table-responsive")||this.Element.addClass("table-responsive");i="lv-"+NewUid();this.Element.attr("listview-identity",i);window[i]=this;this.TableId="tb-"+NewUid();this.HeaderId="th-"+NewUid();this.BodyId="tr-"+NewUid();n=$('<table id="'+this.TableId+'" class="table"><\/table>');this.TableOption.isHover&&n.addClass("table-hover");this.TableOption.isBordered&&n.addClass("table-bordered");this.TableOption.isStriped&&n.addClass("table-striped");this.TableOption.class&&n.addClass(this.TableOption.class);r=$('<thead id="'+this.HeaderId+'"><\/thead>');u=$("<tr><\/tr>");$.each(this.Columns,function(n,t){var i=$("<th>"+t.caption+"<\/th>");t.width&&i.css("width",t.width);t.headerClass&&i.addClass(t.headerClass);u.append(i)});r.append(u);n.append(r);f=$('<tbody id="'+this.BodyId+'"><\/tbody>');n.append(f);this.Element.append(n)},i.prototype.AddColumn=function(n){this.Columns||(this.Columns=[]);this.Columns.push(n)},i.ItemsSourceProperty=n.Data.DependencyProperty.RegisterAttached("",function(){},function(t,i){var r=t.attr("listview-identity"),u=window[r];u.ItemsSource=i instanceof n.Data.ListCollectionView?i:new n.Data.ListCollectionView([])},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay),i}(n.Data.DataBindingBehavior),i;n.ListView=t;i=function(n){function i(t){return n.call(this,t)||this}return __extends(i,n),i.prototype.ColumnBinding=function(n,i,r){if(this.CurrentBehavior instanceof t){var u=$.extend(!0,{},r);u.value=i;u.caption=n;this.CurrentBehavior.AddColumn(u)}return this},i}(n.BindingBehaviorBuilder);n.TableBindingBehaviorBuilder=i;n.BindingBehaviorBuilder.prototype.BuildListView=function(r,u){var f=this,o=f.Add(new t),e;return o.Property=t.ItemsSourceProperty,o.PInfo=new n.LamdaExpression(f.Owner.DataContext,r),o.TableOption=u,e=new i(f.Owner),e.CurrentBehavior=f.CurrentBehavior,e.CurrentElement=f.CurrentElement,e}}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),Object.defineProperty(i.prototype,"ItemsSource",{set:function(t){var i=this,u=$(document.body).find(this.Option.template),f,e,r;u.length!==0&&(f=this.FindTemplate(u),this.RemoveAll(),e=this.DataContext,r=$('<div class="templateRowContainer"><\/div>'),$.each(t.ToArray(),function(t,u){var s=f.clone(),o,h;u.__element=s;o=[];$.each(i.Columns,function(r,f){var h=s.find(f.templateSelector),l,v,c,a;if(h.length!==0){if(f.expression&&f.dependencyProperty&&(l=f.expression(u),f.convertTarget&&(l=f.convertTarget(l,h)),f.dependencyProperty.SetValue(h,l),f.mode===n.Data.BindingMode.TwoWay&&(v=n.LamdaExpression.Path(f.expression),o.push({column:f,element:h,marks:v}))),f.expressionAction&&f.attachedEvent){c=f.attachedEvent.Create();c.AddHandler(function(){f.expressionAction(e,u)});h.off(c.EventName);h.on(c.EventName,function(n){c.Raise(i,n)});h.is("a")&&!h.attr("href")&&h.attr("href","javascript:void(0);")}i.AlternateStyle&&t%2!=0&&(a=s.find(i.AlternateStyle.Selector),a.length!==0&&a.addClass(i.AlternateStyle.Css))}});o.length!==0&&(h=n.Observable.RegisterAttached(u,{marks:o.Select(function(n){return n.marks})}),h.PropertyChanged.AddHandler(function(n,t){var f,r,u,i;if(n)for(f=o.Where(function(n){return n.marks===t.Name}),r=0;r<f.length;r++)u=n[t.Name],i=f[r],i.column.convertTarget&&(u=i.column.convertTarget(u,i.element)),i.column.dependencyProperty.SetValue(i.element,u)}));r.append(s)}),this.Element.append(r))},enumerable:!0,configurable:!0}),i.prototype.FindTemplate=function(n){var r="content"in document.createElement("template"),t,i;return r?(t=n[0],i=$(t.content.querySelector("div")),i):(t=n[0],i=$(t.querySelector("div")),i)},i.prototype.RemoveAll=function(){this.Element.empty()},i.prototype.ClearSortMarks=function(){var n=this.Owner.Container,t=this.Columns.Where(function(n){return n.header?!0:!1});$.each(t,function(t,i){var u=n.find(i.header),r;u.length!==0&&(r=u.find("span"),r.length!==0&&r.removeClass())})},i.prototype.Ensure=function(){var u=this,i,r,n;t.prototype.Ensure.call(this);this.Option=$.extend(!0,this.DefaultOption,this.Option);i=this.Owner.Container;r=this.Columns.Where(function(n){return n.header?!0:!1});$.each(r,function(n,t){var r=i.find(t.header),f;if(r.length!==0){f=r.find("span");f.length===0&&r.append($("<span><\/span>"));r.is("a")&&!r.attr("href")&&r.attr("href","javascript:void(0);");r.off("click");r.on("click",function(n){return u.OnColumnClick(n,t.header)})}});n=this.Element.attr("templateListView-identity");n||(n="id-"+NewUid(),this.Element.attr("templateListView-identity",n));window[n]=this},i.prototype.OnColumnClick=function(t,i){var h=this,c,o,u,s,l;if(i){var r=$(t.target),f=r.find("span"),e=f.hasClass(this.Option.descClass);f.length!==0&&(this.ClearSortMarks(),f.addClass(e?this.Option.ascClass:this.Option.descClass));c={selector:i,sender:this,target:r,isAsc:e,text:r.text(),value:r.val()};this.Option.columnClick?n.Application.Current.SafeAction(function(){return h.Option.columnClick(h.DataContext,c)}):(o=this.Columns.FirstOrDefault(function(n){return n.header===i}),u=this.PInfo.GetValue(),o&&u instanceof n.Data.ListCollectionView&&(s=n.LamdaExpression.Path(o.expression),l=e?u.ToArray().OrderBy(function(n){return n[s]}):u.ToArray().OrderByDecording(function(n){return n[s]}),this.ItemsSource=this.DataContext[this.PInfo.MemberPath]=new n.Data.ListCollectionView(l)))}},Object.defineProperty(i.prototype,"DefaultOption",{get:function(){return{template:"",ascClass:"fa fa-sort-asc",descClass:"fa fa-sort-desc"}},enumerable:!0,configurable:!0}),i.ItemsSourceProperty=n.Data.DependencyProperty.RegisterAttached("",function(){},function(t,i){var r=t.attr("templateListView-identity"),u=window[r];u.ItemsSource=i instanceof n.Data.ListCollectionView?i:new n.Data.ListCollectionView([])},n.Data.UpdateSourceTrigger.Explicit,n.Data.BindingMode.OneWay),i}(n.Data.DataBindingBehavior),i;n.TemplateListView=t;i=function(i){function r(n){return i.call(this,n)||this}return __extends(r,i),r.prototype.BindingColumn=function(t,i,r){return this.BindingProperty(n.UIElement.TextProperty,t,i,r)},r.prototype.BindingColumnAction=function(t,i,r){return this.BindingEvent(n.UIElement.Click,t,i,r)},r.prototype.BindingProperty=function(n,i,r,u){var f=this;return f.CurrentBehavior instanceof t&&(u=$.extend(!0,{},u),u.templateSelector=i,u.expression=r,u.dependencyProperty=n,f.CurrentBehavior.LastOption=u,f.CurrentBehavior.Columns.push(u)),f},r.prototype.BindingEvent=function(n,i,r,u){var f=this;return f.CurrentBehavior instanceof t&&(u=$.extend(!0,{},u),u.templateSelector=i,u.expressionAction=r,u.attachedEvent=n,f.CurrentBehavior.LastOption=u,f.CurrentBehavior.Columns.push(u)),f},r.prototype.BindingRowStyle=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.RowStyleExpression=n),i},r.prototype.BindingAlternateRowStyle=function(n,i){var r=this;return r.CurrentBehavior instanceof t&&(r.CurrentBehavior.AlternateStyle={Selector:n,Css:i}),r},r}(n.BindingBehaviorBuilder);n.TemplateListViewBindingBehaviorBuilder=i;n.BindingBehaviorBuilder.prototype.BuildTemplateItems=function(r,u){var f=this,e=f.Add(new t),o;return e.Owner=f.Owner,e.Property=t.ItemsSourceProperty,e.PInfo=new n.LamdaExpression(f.Owner.DataContext,r),e.Option=$.extend(!0,{},u),e.Columns=[],o=new i(f.Owner),o.CurrentBehavior=f.CurrentBehavior,o.CurrentElement=f.CurrentElement,o}}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function r(){var n=t!==null&&t.apply(this,arguments)||this;return n.MaximumNumberOfAjax=1,n}return __extends(r,t),r.prototype.Ensure=function(){var i=this,n;t.prototype.Ensure.call(this);n=this.Element;n.attr("type","file");n.attr("capture","camera");this.AcceptValue?n.attr("accept",this.AcceptValue):n.attr("accept","image/*");this.AllowMultiFiles&&n.attr("multiple","multiple");n.change(function(n){var t=$.extend(!0,n,{}),r=[];$.each(n.target.files,function(n,t){var u=URL.createObjectURL(t),i=$.extend(!0,t,{});i.uri=u;r.push(i)});i.Files=t.files=r;i.OnTrigger(t)});this.InstanceExpression&&this.InstanceExpression.SetValue(this)},r.prototype.UpdateAll=function(){var t=this,n;if(!this.Files){this.OnCompleted({file:null,response:null});return}return n=new u(this),n.Do().always(function(){t.OnAlways()})},r.prototype.Update=function(n){var r=this,t=new i(this,n);return t.Do(),t.Pms.always(function(){r.OnAlways()})},r.prototype.OnProgress=function(n){console.trace(n.file.name+"..."+n.loaded+" / "+n.total+"  "+n.percent+" %");this.ProgressExpression&&this.ProgressExpression(this.DataContext,n)},r.prototype.OnCompleted=function(n){n.file&&console.trace(n.file.name+"...complete");this.CompletedExpression&&this.CompletedExpression(this.DataContext,n)},r.prototype.OnError=function(n){n.file&&console.trace("error..."+n.file.name);n.error&&console.error(n.error);this.ErrorExpression&&this.ErrorExpression(this.DataContext,n)},r.prototype.OnAlways=function(){this.AlwaysExpression&&this.AlwaysExpression(this.DataContext)},r.SelectedFiles=n.EventBuilder.RegisterAttached("selectedFiles"),r}(n.Data.ActionBindingBehavior);n.FileBrowser=t;var u=function(){function n(n){this.FileBrowser=n}return n.prototype.Do=function(){var u=this,i=this.FileBrowser.Files,n=parseInt(String(i.length/this.FileBrowser.MaximumNumberOfAjax)),t,r;return n===0&&(n=1),t=[],r=i.Chunk(n),$.each(r,function(n,i){var r=new f(u.FileBrowser,i);t.push(r.Do())}),$.when(t)},n}(),f=function(){function n(n,t){this.FileBrowser=n;this.Queue=t}return n.prototype.Do=function(){var t=this,n=this.Queue.Select(function(n){return new i(t.FileBrowser,n)});return $.each(n,function(t,i){var r=t+1;r<n.length&&i.Pms.always(function(){n[r].Do()})}),0<n.length&&n[0].Do(),$.when(n.Select(function(n){return n.Pms}))},n}(),i=function(){function n(n,t){this.FileBrowser=n;this.File=t;this.Dfd=$.Deferred();this.Pms=this.Dfd.promise()}return n.prototype.Do=function(){var n=this,t=new FormData;t.append("userfile",this.File);$.ajax({xhr:function(){var t=new XMLHttpRequest;return t.upload.addEventListener("progress",function(t){if(t.lengthComputable){var i=t.loaded/t.total*100;n.FileBrowser.OnProgress({loaded:t.loaded,total:t.total,percent:i,file:n.File})}},!1),t.addEventListener("progress",function(t){if(t.lengthComputable){var i=t.loaded/t.total*100;n.FileBrowser.OnProgress({loaded:t.loaded,total:t.total,percent:i,file:n.File})}},!1),t},type:"POST",url:this.FileBrowser.UploadUri,data:t,processData:!1,contentType:!1,success:function(t){n.FileBrowser.OnCompleted({response:t,file:n.File});n.Dfd.resolve(t)},error:function(t,i,r){n.FileBrowser.OnError({file:n.File,error:r});n.Dfd.reject(r)}})},n}(),r=function(i){function r(n){return i.call(this,n)||this}return __extends(r,i),r.prototype.AllowMultiFiles=function(){var n=this;return n.CurrentBehavior instanceof t&&(n.CurrentBehavior.AllowMultiFiles=!0),n},r.prototype.AcceptFilter=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.AcceptValue=n),i},r.prototype.UploadUri=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.UploadUri=n),i},r.prototype.BindingUploader=function(i){var r=this;return r.CurrentBehavior instanceof t&&(r.CurrentBehavior.InstanceExpression=new n.LamdaExpression(r.Owner.DataContext,i)),r},r.prototype.BindingUploaderProgress=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.ProgressExpression=n),i},r.prototype.BindingUploaderComplete=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.CompletedExpression=n),i},r.prototype.BindingUploaderError=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.ErrorExpression=n),i},r.prototype.BindingUploaderAlways=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.AlwaysExpression=n),i},r.prototype.MaximumNumberOfAjax=function(n){var i=this;return i.CurrentBehavior instanceof t&&(i.CurrentBehavior.MaximumNumberOfAjax=n),i},r}(n.Data.ActionBindingBehaviorBuilder);n.FileBrowserBindingBehaviorBuilder=r;n.BindingBehaviorBuilder.prototype.BuildFileBrowser=function(n){var u=this,i=u.Add(new t),f;return i.Event=t.SelectedFiles.Create(),i.Action=n,i.ActionParameterCount=i.Action.length,i.AllowBubbling=!1,f=new r(u.Owner),f.CurrentBehavior=u.CurrentBehavior,f.CurrentElement=u.CurrentElement,f}}(DomBehind||(DomBehind={})),function(n){var t=function(){function t(){this._navigator=new n.Navigation.DefaultNavigator}return Object.defineProperty(t,"Current",{get:function(){return t._app},enumerable:!0,configurable:!0}),t.Resolve=function(){if(!t._app){var i=this;$(document).ready(function(){var r=new n.TypedFactory(i),u=r.CreateInstance();t._app=u;window.history.pushState(null,"",window.location.href);window.onpopstate=function(){window.history.pushState(null,"",window.location.href);t.Current.OnBrowserBack()}})}},t.prototype.OnBrowserBack=function(){},t.prototype.SafeAction=function(n,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];try{return t?$.proxy(n,t,r):n()}catch(u){this.UnhandledException(u)}},Object.defineProperty(t.prototype,"DefaultActionPolicy",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Navigator",{get:function(){return this._navigator},enumerable:!0,configurable:!0}),t}();n.Application=t}(DomBehind||(DomBehind={})),function(n){var t=function(){function t(){this._disposed=!1}return Object.defineProperty(t.prototype,"Container",{get:function(){return this._container},set:function(n){this._container!==n&&(this._container&&(this._container.empty(),this._container=null),this._container=n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DataContext",{get:function(){return this._dataContext},set:function(n){this._dataContext!==n&&(this._dataContext=n)},enumerable:!0,configurable:!0}),t.prototype.OnDataContextPropertyChanged=function(n,t){this.UpdateTarget(t.Name)},t.prototype.ViewLoaded=function(){},t.prototype.Ensure=function(){if(this.DataContext){var t=this.DataContext;t.View=this;this.BindingBehaviors&&(this.BindingBehaviors.Dispose(),this.BindingBehaviors=null);this.BindingBehaviors=new n.Data.BindingBehaviorCollection;this.BuildBinding();this.Subscribe();this.BindingBehaviors.Ensure();this.DependencyValidateSetup&&this.DependencyValidateSetup();t.Initialized||(t.Initialized=!0,this.Container.Raise(n.UIElement.Initialize));this.UpdateTarget();this.Container.Raise(n.UIElement.Activate)}},t.prototype.UnSubscribe=function(){},t.prototype.Subscribe=function(){},t.prototype.CreateBindingBuilder=function(){var t=new n.BindingBehaviorBuilder(this);return t.Element(this.Container).BindingAction(n.UIElement.Initialize,function(n){return n.Initialize()}),t.Element(this.Container).BindingAction(n.UIElement.Activate,function(n){return n.Activate()}),t},t.prototype.UpdateTarget=function(n){this.BindingBehaviors&&this.BindingBehaviors.UpdateTarget(n)},t.prototype.UpdateSource=function(n){this.BindingBehaviors&&this.BindingBehaviors.UpdateSource(n)},t.prototype.Validate=function(n){var t=!0;return this.BindingBehaviors&&(this.ClearValidator(n),$.each(this.BindingBehaviors.ListDataBindingBehavior(n),function(n,i){i.BindingPolicy.Validators.Validate()||(t=!1)}),t&&this.ClearValidator(n)),this.DependencyValidate&&this.DependencyValidate(n),t},t.prototype.ClearValidator=function(n){$.each(this.BindingBehaviors.ListDataBindingBehavior(n),function(n,t){t.BindingPolicy.Validators.ClearValidator()});this.Container.ClearCustomError();this.DependencyValidateClear&&this.DependencyValidateClear(n)},t.prototype.Dispose=function(){if(!this._disposed){if(this.UnSubscribe(),this.BindingBehaviors&&(this.BindingBehaviors.Dispose(),this.BindingBehaviors=null),this.DataContext){var n=this.DataContext;n.Dispose&&n.Dispose();this.DataContext=null}this.Container&&(this.Container.empty(),this.Container=null)}this._disposed=!0},t}();n.BizView=t}(DomBehind||(DomBehind={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(){var i=t.call(this)||this;return i.Initialized=!1,n.Locator.Push(i),i}return __extends(i,t),i.prototype.NotifyEvent=function(n,t){n&&n.Raise(this,t)},Object.defineProperty(i.prototype,"Title",{get:function(){return this._title},set:function(n){this._title=n;document.title=n},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"View",{get:function(){return this._view},set:function(n){this._view!==n&&(this._view=n,this.OnViewChanged())},enumerable:!0,configurable:!0}),i.prototype.OnViewChanged=function(){},i.prototype.Activate=function(){},i.prototype.UpdateTarget=function(n){this.View&&this.View.UpdateTarget(n)},i.prototype.UpdateSource=function(n){this.View&&this.View.UpdateSource(n)},i.prototype.Validate=function(n){var t=!1;return this.View&&(t=this.View.Validate(n)),t},i.prototype.WaitingOverlay=function(t,i){var r=new n.Data.WindowWaitingOverlayActionPolicy;i&&(r.Option.Image=i);this.SafeAction(t,r)},i.prototype.SafeAction=function(t){for(var f,u,e,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];f=new n.Data.ActionBindingBehavior;u=[new n.Data.ExceptionHandlingActionPolicy];r&&$.each(r,function(n,t){return u.push(t)});e=f.CreateActionInvoker(u);e.Do(t)},i.prototype.Catch=function(t){t.Data instanceof n.AjaxException},Object.defineProperty(i.prototype,"Navigator",{get:function(){return n.Application.Current.Navigator},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"IsEnabled",{get:function(){return this.GetProperty("IsEnabled",!0)},set:function(n){this.SetProperty("IsEnabled",n)},enumerable:!0,configurable:!0}),i.prototype.ShowInfomation=function(t,i){n.MessaageBox.ShowMessage(t,i,n.MessageStatus.Infomation)},i.prototype.ShowWarning=function(t,i){n.MessaageBox.ShowMessage(t,i,n.MessageStatus.Warning)},i.prototype.ShowError=function(t,i){n.MessaageBox.ShowMessage(t,i,n.MessageStatus.Error)},i.prototype.ShowMessage=function(t,i,r){n.MessaageBox.ShowMessage(t,i,r)},i.prototype.ShowYesNo=function(t,i,r){n.MessaageBox.ShowYesNo(t,i,r)},i.prototype.ShowOkCancel=function(t,i,r){n.MessaageBox.ShowOkCancel(t,i,r)},i.prototype.Dispose=function(){this._disposed||t.prototype.Dispose.call(this)},i}(n.NotifiableImp);n.BizViewModel=t}(DomBehind||(DomBehind={}));annotationCollection=function(){function n(){this.lazyList=[]}return n.prototype.Any=function(n,t,i){return this.lazyList.Any(function(r){return r.Selector===n&&r.ResolveViewType===t&&r.ResolveViewModelType===i})},n.prototype.Add=function(n,t,i){this.lazyList.push({Selector:n,ResolveViewType:t,ResolveViewModelType:i})},n.prototype.Remove=function(n){var t=[];$.each(this.lazyList,function(i,r){r.Selector===n&&r.ResolveViewType===r.ResolveViewType&&r.ResolveViewModelType===r.ResolveViewModelType||t.push(r)});this.lazyList=t},n.prototype.ToArray=function(){var n=[];return $.each(this.lazyList,function(t,i){return n.push(i)}),n},n.prototype.Pop=function(n){var t=this;$.each(this.ToArray(),function(i,r){n||t.Remove(r.Selector,r.ResolveViewType,r.ResolveViewModelType);$.BindingAnnotation(r.Selector,r.ResolveViewType,r.ResolveViewModelType)})},n}();__lazyCollection=new annotationCollection;$.BindingAnnotation=function(n,t,i){var r=$.Deferred(),u=$(n);return u.ready(function(){var f=$(n);if(f.length===0){__lazyCollection.Any(n,t,i)||__lazyCollection.Add(n,t,i);r.reject();return}var e=new DomBehind.TypedFactory(t()),o=new DomBehind.TypedFactory(i()),u=new DomBehind.Data.ViewViewModelBindingBehavior;u.GetView=function(){return e.CreateInstance()};u.GetViewModel=function(){return o.CreateInstance()};u.Element=$(n);u.Ensure();f.trigger("RegisteredViewViewModel",u);r.resolve()}),r.promise()},function(n){var t=function(){function n(){}return n.Push=function(t){n._container.push(t)},n.List=function(t,i){var r=[];return $.each(n._container,function(n,u){u instanceof t&&(i?i(u)&&r.push(u):r.push(u))}),r},n.First=function(t,i){var r;return $.each(n._container,function(n,u){if(u instanceof t)if(i){if(i(u))return r=u,!1}else return r=u,!1}),r},n.Remove=function(t,i){var r=[];$.each(n._container,function(n,u){u instanceof t?!i||i(u)||r.push(u):r.push(u)});n._container=r},n.Clear=function(){n._container=[]},n._container=[],n}();n.Locator=t}(DomBehind||(DomBehind={}));$.validator.setDefaults({ignore:"",errorPlacement:function(n,t){var i=t.attr("id"),r,u,e,f;i&&(r=t.prevAll('[for="'+i+'"]'),r.length!=0&&n.insertAfter(r),u=t.nextAll('[for="'+i+'"]'),u.length!=0&&n.insertAfter(u),e=t.closest("form"),f=e.find('[for="'+i+'"]'),f.length!=0&&n.insertAfter(f),r.length===0&&u.length===0&&f.length===0&&n.insertAfter(t))}}),function(n){n.BizView.prototype.DependencyValidateSetup=function(){var i=this,t=i.Container;t&&(t.is("form")||(t=t.find("form")),t.length==0&&(t=t.closest("form")),t.length!=0)&&$.each(i.BindingBehaviors.ListDataBindingBehavior(),function(t,i){$.each(i.BindingPolicy.Validators.toArray(),function(t,r){var u=i.Element,f=u.attr("identity"),o,h,e,c,s;u.attr("identity")||(f=NewUid().Replace("-",""),u.attr("identity",f));o="cls-"+f;u.hasClass(o)||u.addClass(o);h=u.attr("name");String.IsNullOrWhiteSpace(h)&&u.attr("name","name-"+f);e="func-"+f;c=JSON.parse('{ "'+e+'": { "'+e+'": true }  }');$.validator.addClassRules(o,c);r instanceof n.Validation.RequiredValidator&&(s=$.validator.methods.required,r.Message?$.validator.addMethod(""+e,s,r.Message):$.validator.addMethod(""+e,s,""))})})};n.BizView.prototype.DependencyValidate=function(t){var r=this,i=r.Container;i&&(i.is("form")||(i=i.find("form")),i.length==0&&(i=i.closest("form")),i.length!=0)&&$.each(r.BindingBehaviors.ListDataBindingBehavior(t),function(t,i){$.each(i.BindingPolicy.Validators.toArray(),function(t,r){var u=i.Element;r instanceof n.Validation.RequiredValidator&&u.attr(r.Attribute)&&u.removeAttr(r.Attribute);u.valid()})})};n.BizView.prototype.DependencyValidateClear=function(){var i=this,n=i.Container,t;n&&(n.is("form")||(n=n.find("form")),n.length==0&&(n=n.closest("form")),n.length!=0)&&(t=n.validate(),t&&t.resetForm())}}(DomBehind||(DomBehind={}));
//# sourceMappingURL=dombehind.min.js.map